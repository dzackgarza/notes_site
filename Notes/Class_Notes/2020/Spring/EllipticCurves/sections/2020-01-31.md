# Friday January 31st

## Finite Separable Extensions are PFFs ?

Given a product formula field (PFF) $(K, \Sigma_K, A)$, recall that we want the product formula:

\begin{align*}
\forall x\in K\units,\quad \prod_{v\in \Sigma_K} \abs{x}_v = 1
.\end{align*}

We want to show that given any finite separable extension $L/K$, endow it with a PF structure where the places of $L$ are given by $\Sigma_L =$ all extensions of $v\in L/K$ to $L$ (?)

> Note that separability is not necessary but does simplify things, c.f. Serre.

The structure for $A$: to be decided.

A technical remark: 
A global field is given by $K = \FF_q(C)$ where $C/\FF_q$ is a nice curve.

Then $\QQ$ has a PF structure, $K(t)$ has a PF structure.
Note that the extensions over $\QQ$ will be separable, since we're in characteristic zero, so the question is about separable extensions over $K(t)$.

If $C/K$ is a nice curve over any field, then there exists a finite degree extension $K(C) / K(t)$ iff $C \mapsvia{f} \PP^1$.

> Reminder: Noether's normalization, integral affine variety over any field, can geometrically map it down to affine d-space via an algebraic (finite) map.
> So we end up with a finitely generated module over a polynomial ring.

We want a separable extension, and from field theory, since $\FF_q$ is perfect we can find $\FF_q(t) \subset \FF_q(C)$ which is separable.

If $k$ is any perfect field, then we can find a separable Noether normalization.
If $K/k$ is a finitely generated field extension of transcendence degree $d$.
Moreover, we can find an extension 
$$
K \mapsvia{\text{finite, separable}} k(f_1, \cdots, f_d) \to k
.$$

So let $L/K$ be degree $d$ and separable.
There is a surjective map $\Sigma_L \surjects \Sigma_K$ with fibers of size $\leq d$.
For $v\in \Sigma_k$, this is defined by $L_v\definedas L \tensor_k K_v$, and if $L/K$ is separable then $L \cong k[t]/(f)$ where $f$ is separable and irreducible.
Thus $L_v \cong K_v[t] / (f)$ where $f = f_1 \cdots f_r$ which are irreducible over $K_v$.
By the Chinese Remainder Theorem, $$L_v \cong \prod_{i=1}^r K_v[t] / (f_i) \cong \prod_{w \mid v} L_w.$$

> Primitive element theorem: finite separable extensions of fields are generated by one element.

How do we extend the norm?
For $x\in C_w$, define 
$$
\abs{x}_w \definedas \abs{ N_{L_w}/ K_v (x) }_v^{\frac 1 d}
$$ 
where $d$ is the global degree $d = [L : K]$.

> Note that the exponent here is not necessary to get the product formula, but it works anyway and is useful when we later look at heights.

Lemma
: For $x\in C$, 
$$
\prod_{w \mid v} \abs{x}_w = \abs{N_{L/K}(x)}_v^{\frac 1 d}
.$$

This yields the normalization $A_L$.

Theorem (Finite Separable Extensions are PFFs)
: The product formula holds, i.e. $(L, \Sigma_K, A)$ is a PFF.

For all $x\in L\dual$, we have 
$$
\prod_{w\in \Sigma_L} \abs{x}_w = \prod_{v\in \Sigma_K} \prod_{w\mid v} \abs{x}_w = \prod_{v\in \Sigma_K} \abs{ N_{L/K}(x)  }_v^{\frac 1 d} = 1
$$ 
by the product formula on $K$.


## Height Functions

For $(K, \Sigma_K, A_K)$ a PFF, define $x\definedas (x_0, \cdots, x_n) \in \AA^{n+1}(K)$ and 
$$
H(x) \definedas \prod_{v\in \Sigma_K} \max_{0\leq i \leq n} \abs{x_i}_v
.$$
Then $H(x) = 0$ iff $x = (0, 0, \cdots, 0)$.

Lemma
: For all $\lambda \in K\units$, $H(\lambda x_1, \cdots, \lambda x_n) = H(x_1, \cdots, x_n)$, so $H$ descends to $H: \PP^n(K) \to \RR$.

Thus for any $p \in \PP^n(K)$, can write $p = [x_0, \cdots, x_n]$ where some $x_i = 1$.
So each term appearing in the product is at least 1.

For $x\in K$, we define $H(x) = H([x: 1])$.

Example
: Take $K = \QQ$ and $n=1$, we can compute $H([x: y]) = H([a, b])$ where $\gcd(a, b) = 1$. 
	This equals $\prod_{p\leq \infty} \max(\abs{a}_p, \abs{b}_p)$, the $p\dash$adic norms.
	This equals 
	$$
	\qty{\max(\abs a, \abs b)} \qty{ \prod_p \max(\abs{a}_p, \abs{b}_p)  }
	,$$ 
	where the second term collapses to 1 because every term is 1, because no $p$ can divide both $a$ and $b$.
	So $H([a, b]) = \max(\abs a, \abs b)$.

Example
: Take $K=\QQ, n$ arbitrary.
	WLOG, we can consider $\theset{x_i}$ with $\gcd(x_i) = 1$, then $H([x_0: \cdots : x_n]) = \max(\abs{x_0}, \cdots, \abs{x_n})$.

	We in fact have a finite bound

	\begin{align*}
	\#\theset{P \in \PP^n(\QQ) \suchthat H(P) \leq R \in \ZZ} \leq (2R + 1)^{n+1} 
	.\end{align*}

Note that the probability that two numbers are prime is $1/\zeta(2)$; look at Euler product expansion.

> Idea of proof: don't want both to be divisible by 2, by 3, by 5, etc.

Example
: Let $K = k(t) \supset k[t]$ for $k$ arbitrary.
	Write $H([x_0: x_1]) = H([a:b])$ where $a, b\in k[t]$ with $\gcd(a, b) = 1$.
	Recall that the infinite-adic norm is given by $\abs{a}_\infty = C^{\deg(a)}$.
	Then 

	\begin{align*}
	H([a: b]) &= \prod_{p\leq \infty} \max(\abs{a}_p, \abs{b}_p) \\
	&= \qty{ \max(\abs{a}_\infty,\abs{b}_\infty)} \prod_p \max(\abs{a}_p, \abs{b}_p) \\
	&= \max(C^{\deg a}, C^{\deg b})
	,\end{align*}

	where the same argument goes through.
	Thus $\log_C H([a: b]) = \max(\deg a, \deg b)$, literally the maximum degree of these two polynomials.

Note that there are only finitely many polynomials of a given degree $d$ iff the field is finite.
So the PFF formalism doesn't care about the field, but the Northcott property depends on the cardinality of the field in a key way.

Fact
: The Northcott property holds for all $R> 0$ and for all $n$, i.e. 
	$$
	\#\theset{P\in \PP^n \suchthat H(P) \leq R} < \infty
	$$ 
	iff $K$ is finite.
	
	This holds iff $$\#\theset{P\in \PP^n \suchthat \log_C H(P) \leq R}$$ is finite.
	Note that if $K = \FF_q$, then for $R\in \ZZ^+$, 
	$$
	\#\theset{P \in \PP^n(\FF_q) \suchthat \log_C H(P) \leq R} = (q^{r+1})^{n+1}
	$$ 
	by counting choices for coefficients.

We'll show that the Northcott property passes to finite extensions.

Theorem (Finiteness for Northcott PFFs)
: Let $K$ be a Northcott PFF, then for all $n\in \ZZ^+$, for all $R\in \RR$, for all $d\in \ZZ^+$, 
$$
\#\theset{ P \in \PP^n(K\sep) \suchthat [K(P): K] \leq d,~H(P) \leq R  }
$$ 
is finite.
