# Tuesday November 5th

## Free vs Projective Modules

Let $R$ be a PID.
Then any nonzero submodule of a free module over a PID is free, and any projective module over $R$ is free.

Recall that a module $M$ is **projective** $\iff M$ is a direct summand of a free module.

In general,

- Free $\implies$ projective, but

- Projective $\centernot\implies$ free.

*Example:*

Consider $\ZZ_6 = \ZZ_2 \oplus \ZZ_3$ as a $\ZZ\dash$module.
Is this free as a $\ZZ\dash$module?

Note that $\ZZ_2$ is a submodule and thus projective, but $\ZZ_2$ is not free since it is not a free module over $\ZZ$.
What fails here is that $\ZZ_6$ is not a PID, since it is not a domain.

## Annihilators

**Definition:**
Let $m\in M$ a module, then define
$$
\mathrm{Ann}_m \definedas \theset{r\in R \suchthat r.m = 0 } \normal R.
$$
We can then define a map

\begin{align*}
\phi: R \to R.m \\
r \mapsto r.m
.\end{align*}


Then $\ker \phi = \mathrm{Ann}_m$, and $R/\mathrm{Ann} \cong R.m$.

We can also define
$$
M_t \definedas \theset{m\in M \suchthat \mathrm{Ann}_m \neq 0} \leq M.
$$

**Lemma:**
Let $R$ be a PID and $p$ a prime element. Then

- If $p^i m = 0$ then $\mathrm{Ann}_m = (p^j)$ where $0\leq j\leq i$.
- If $\mathrm{Ann}_m = (p^i)$, then $p^jm \neq 0$ for any $j < m$.

*Proof of (1):*
Since we are in a PID and the annihilator is an ideal, we have $\mathrm{Ann}_m \definedas (r)$ for some $r\in M$.
Then $p^i \in (r)$, so $r \divides p^i$.
But $p$ was prime, to up to scaling by units, we have $r = p^j$ for some $j \leq i$.

$\qed$

*Proof of (2):*
Towards a contradiction, suppose that $\mathrm{Ann}_m = (p^i)$ and $p^jm = 0$ for some $j < i$.
Then $p^j \in \mathrm{Ann}_m$, so $p^j \divides p^i$.
But this forces $j \leq i$, a contradiction.

$\qed$

*Some terminology:*

- $\mathrm{Ann}_m$ is the **order ideal** of $m$.

- $M_t$ is the **torsion submodule** of $M$.

- $M$ is **torsion** iff $M = M_t$.

- $M$ is **torsion free** iff $M_t = 0$.

- $\mathrm{Ann}_m = (r)$ is said to have **order $r$**.

- $Rm$ is the **cyclic module** generated by $m$.

**Theorem:**
A finitely generated *torsion-free* module over a PID is free.

*Proof:*
Let $M = \generators{X}$ for some finite generating set.

We can assume $M \neq (0)$.
If $m\neq 0 \in M$, with $rm = 0$ iff $r=0$.

So choose $S = \theset{x_1, \cdots , x_n} \subseteq X$ to be a maximal linearly independent subset of generators, so
$$
\sum r_i x_i = 0 \implies r_i = 0 ~\forall i
.$$

Consider the submodule $F \definedas \generators{x_1, \cdots, x_n} \leq M$; then $S$ is a basis for $F$ and thus $F$ is free.

The claim is that $M \cong F$.
Supposing otherwise, let $y\in X\setminus S$.
Then $S \union \theset{y}$ can not be linearly independent, so there exists $r_y, r_i \in R$ such that
$$
r_y y + \sum r_i x^i = 0
.$$
Thus $r_y y = - \sum r_i x^i$, where $r_y \neq 0$.

Since $\abs X < \infty$, let
$$
r = \prod_{y \in X\setminus S} r_y
.$$

Then $rX = \theset{rx \suchthat x\in X} \subseteq F$, and $rM \leq F$.

Now using the particular $r$ we've just defined, define a map
\begin{align*}
f: M &\to M \\
m &\mapsto rm
.\end{align*}

Then $\im f = r.M$, and since $M$ is torsion-free, $\ker f = (0)$.
So $M \cong rM \subseteq F$ and $M$ is free.

$\qed$

**Theorem:**
Let $M$ be a finitely generated module over a PID $R$.
Then $M$ can be decomposed as
$$
M \cong M_t \oplus F
$$
where $M_t$ is torsion and $F$ is free of finite rank, and $F \cong M/M_t$.

> Note: we also have $M/F \cong F_t$ since this is a direct sum.

*Proof:*

*Part 1: $M/M_t$ is torsion free.*

Suppose that $r(m + M_t) = M_t$, so that $r$ acting on a coset is the zero coset.
Then $rm + M_t = M_t$, so $rm \in M_t$, so there exists some $r'$ such that $r'(rm) = 0$ by definition of $M_t$.
But then $(r'r)m = 0$, so in fact $m\in M_t$ and thus $m + M_t = M_t$, making $M/M_t$ torsion free.

*Part 2: $F \cong M/M_t$.*

We thus have a SES

\begin{align*}
0 \to M_t \to M \to M/M_t \definedas F \to 0
,\end{align*}


and since we've shown that $F$ is torsion-free, by the previous theorem $F$ is free.
Moreover, every SES with a free module in the right-hand slot splits:

```{=latex}
\begin{center}
\begin{tikzcd}
             &  &                &  &                    &  & X \arrow[dd, "\iota", hook] \arrow[lldd, "f", tail]          &  &   \\
             &  &                &  &                    &  &                                                              &  &   \\
0 \arrow[rr] &  & M_t \arrow[rr] &  & M \arrow[rr, "f"'] &  & F \arrow[rr] \arrow[ll, "h" description, dotted, bend right] &  & 0
\end{tikzcd}
\end{center}
```

For $X = \theset{x_j}$ a generating set of $F$, we can choose elements $\theset{y_i} \in \pi\inv(\iota(X))$ to construct a set map $f: X \to M$.
By the universal property of free modules, we get a map $h: F \to M$.

It remains to check that this is actually a splitting, but we have

$$
\pi \circ h (x_j) = \pi(h(\iota(x_j))) = \pi(f(x_j)) = \pi(y_j) = x_j.
$$
**Lemma:**
Let $R$ be a PID, and $r\in R$ factor as $r = \prod p_i^{k_i}$ as a prime factorization.
Then
$$
R/(r) \cong \bigoplus R/(p_i^{k_i}).
$$

Since $R$ is a UFD, suppose that $\gcd(s ,t) = 1$.
Then the claim is that
$$
R/(st) = R/(s) \oplus R/(t)
,$$
which will prove the lemma by induction.

Define a map
\begin{align*}
\alpha: R/(s) \oplus R/(t) &\to R/(st) \\
(x + (s), y+(t)) &\mapsto tx + sy + (st)
.\end{align*}

*Exercise*:
Show that this map is well-defined.

Since $\gcd(s, t) = 1$, there exist $u, v$ such that $su + vt = 1$.
Then for any $r\in R$, we have
$$
rsu + rvt = r
,$$
so for any given $r\in R$ we can pick $x =tv$ and $y=su$ so that this holds.
As a result, the map $\alpha$ is onto.

Now suppose $tx + sy \in (st)$; then $tx + sy  = stz$.
We have $su + vt = 1$, and thus
$$
utx + usy  = ustz \implies utx + (y-tvy) = ustz
.$$

We can thus write
$$
y = ustv - utx + tvy  \in (t)
.$$

Similarly, $x\in (t)$, so $\ker \alpha = 0$.

$\qed$

## Classification of Finitely Generated Modules Over a PID

**Theorem (Classification of Finitely Generated Modules over a PID):**

Let $M$ be a finitely generated $R\dash$module where $R$ is a PID.
Then

1.
$$
M \cong F \bigoplus_{i=1}^t R/(r_i)
$$
where $F$ is free of finite rank and $r_1 \divides r_2 \divides \cdots \divides r_t$.
  The rank and list of ideals occurring is uniquely determined by $M$.
  The $r_i$ are referred to as the **invariant factors**.


b.
$$
M \cong F \bigoplus_{i=1}^k R/(p_i^{s_i})
$$
where $F$ is free of finite rank and $p_i$ are primes that need not be distinct.
  The rank and ideals are uniquely determined by $M$.
  The $p_i^{s_i}$ are referred to as **elementary divisors**.
