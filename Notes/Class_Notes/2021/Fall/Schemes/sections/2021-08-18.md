# Wednesday, August 18: Sheaves

:::{.remark}
We'll be covering Hartshorne, chapter 2:

- Sections 1-5:
  Fundamental, sheaves, schemes, morphisms, constant sheaves.

- Sections 6-9:
  Divisors, linear systems of differentials, nonsingular varieties.

Note that most of the important material of this book is contained in the exercises!
:::

:::{.remark}
Recall that a **topological space** $X$ is collection of *open* sets $\mcu = \ts{U_i \subseteq X}$ which is closed under arbitrary unions and finite intersections, where $X, \emptyset\in \mcu$.
:::

:::{.definition title="Presheaf"}
A **presheaf of abelian groups** $\mcf$ on $X$ a topological space is an assignment to every open $U \subseteq X$ an abelian group $\mcf(U)$ and restriction morphisms $\rho_{UV}: \mcf(U) \to \mcf(V)$ for every inclusion $V \subseteq U$ satisfying

- $\mcf(\emptyset) = 0$
- $\rho_{UU}: \mcf(U) \to \mcf(U)$ is $\id_{\mcf(U)}$.
- If $W \subseteq V \subseteq U$ are opens, then
\[
\rho_{UW} = \rho_{VW} \circ \rho_{UV}
.\]

We'll write $\mcf(U)$ to be the **sections of $\mcf$ over $U$**, also notated $\globsec{U; \mcf}$ and write the restrictions as $\ro{s}{v} = \rho_{UV}(s)$ for $V \subseteq U$.
:::

:::{.example title="Presheaf of continuous functions"}
Let $X \da \RR$ with the standard topology and take $\mcf = C^0(\wait; \RR)$ (continuous real-valued functions) as the associated presheaf.
So for $U \subset \RR$ open, the sections are $\mcf(U) \da \ts{f: U\to \RR \text{ continuous}}$.

For restriction maps, given $U \subseteq V$ take the actual restriction of functions $C^0(V; \RR) \to C^0(U; \RR)$.
One needs to check the 3 conditions, but we can declare $C^0(\emptyset; \RR) = \ts{0} = 0$, and the others follow right away.
:::

:::{.example title="Constant presheaves"}
The **constant presheaf** associated to $A\in \Ab$ on $X\in \Top$ is denote $F = \ul{A}$, where
\[
\ul{A}(U) \da 
\begin{cases}
A &  U \neq \emptyset
\\
0 & U = \emptyset.
\end{cases}
\]
and 
\[
\rho_{UV} \da 
\begin{cases}
\id_A & V \neq \emptyset 
\\
0 & V=\emptyset .
\end{cases}
.\]

:::

:::{.warnings}
The constant sheaf is not the sheaf of constant functions!
Instead these are *locally* constant functions.
:::

:::{.remark}
Let $\Open\slice{X}$ denote the category of open sets of $X$, defined 

- $\Ob(\Open\slice{X}) \da \ts{U_i}$, so each object is an open set.
- $\Open\slice{X}(U, V)$ is empty when $V\not\subset U$ and is the singleton inclusion $\ts{\iota: U\injects V}$ otherwise.


:::

:::{.example title="Of $\Open\slice{X}$ "}
Take $X\da \ts{p, q}$ with the discrete topology to obtain a category with 4 objects:

\begin{tikzcd}
	& {\ts{p, q}} \\
	{\ts{p}} && {\ts{q}} \\
	& \emptyset
	\arrow[from=3-2, to=1-2]
	\arrow[from=3-2, to=2-1]
	\arrow[from=3-2, to=2-3]
	\arrow[from=2-1, to=1-2]
	\arrow[from=2-3, to=1-2]
\end{tikzcd}

> [Link to Diagram](https://q.uiver.app/?q=WzAsNCxbMSwwLCJcXHRze3AsIHF9Il0sWzAsMSwiXFx0c3twfSJdLFsyLDEsIlxcdHN7cX0iXSxbMSwyLCJcXGVtcHR5c2V0Il0sWzMsMF0sWzMsMV0sWzMsMl0sWzEsMF0sWzIsMF1d)

Similarly, the indiscrete topology yields $\emptyset \to \ts{p, q}$, a category with two objects.
:::

:::{.remark}
Then a presheaf is a contravariant functor $\mcf: \Open\slice{X} \to \Ab$ which sends the cofinal/initial object $\ts{\emptyset} \in \Open\slice{X}$ to the final/terminal object $0 \in \Ab$.
More generally, we can replace $\Ab$ with any category $\cat{C}$ admitting a final object:

- $\cat{C} \da \CRing$ the category of commutative rings, which we'll use to define schemes.
- $\cat{C} = \Grp$, the full category of (potentially nonabelian) groups.
- $\cat{C} \da \Top$, arbitrary topological spaces.

:::

:::{.example title="of presheaves"}
Let $X\in \Var\slice{k}$ a variety over $k\in \Field$ equipped with the Zariski topology, so the opens are complements of vanishing loci.
Given $U \subseteq X$, define a presheaf of regular functions $\mcf \da \OO$ where

- $\OO(U)$ are the regular functions $f:U\to k$, i.e. functions on $U$ which are locally expressible as a ratio $f = g/h$ with $g, h\in \kx{n}$.

- Restrictions are restrictions of functions.

Taking $X = \AA^1\slice{k}$, the Zariski topology is the cofinite topology, so every open $U$ is the complement of a finite set and $U = \ts{t_1, \cdots, t_m}^c$.
Then $\OO(U) = \ts{\phi: U\to k}$ which is locally a fraction, and it turns out that these are all globally fractions and thus \[
\OO(U) 
= \ts{ {f \over g} \st f,g\in k[t], g(t) \neq 0 \,\,\, \forall t\in U}
= \ts{{ f \over  \prod (t-t_i)^{m_i}} \st f\in k[t] }
= k[t]\localize{S}
,\]
where $S = \gens{\prod t-t_i}$ is the multiplicative set generated by the factors.

This gives an abelian group since we can take least common denominators, and we have restrictions.
:::

:::{.warnings}
Note that there are two similar notations for localization which mean different things!
For a multiplicative set $S$, the ring $R\localize{S}$ literally means localizing at that set.
For $\mfp \in \spec R$, the ring $R\localize{\mfp}$ means localizing at the multiplicative set $S \da \mfp^c$.
:::
