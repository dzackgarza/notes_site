\newcommand{\cat}[1]{\mathsf{#1}}

\newcommand{\Sets}[0]{{\mathsf{Set}}}
\newcommand{\Set}[0]{{\mathsf{Set}}}
\newcommand{\sets}[0]{{\mathsf{Set}}}
\newcommand{\set}{{\mathsf{Set} }}
\newcommand{\Poset}[0]{\mathsf{Poset}}
\newcommand{\GSets}[0]{{G\dash\mathsf{Set}}}
\newcommand{\Groups}[0]{{\mathsf{Group}}}
\newcommand{\Grp}[0]{{\mathsf{Grp}}}

% Modifiers
\newcommand{\pre}[0]{{\mathsf{pre}}}
\newcommand{\fn}[0]{{\mathsf{fn}}}
\newcommand{\smooth}[0]{{\mathsf{sm}}}
\newcommand{\Aff}[0]{{\mathsf{Aff}}}
\newcommand{\Ab}[0]{{\mathsf{Ab}}}
\newcommand{\Assoc}[0]{\mathsf{Assoc}}
\newcommand{\Ch}[0]{\mathsf{Ch}}
\newcommand{\Coh}[0]{{\mathsf{Coh}}}
\newcommand{\Comm}[0]{\mathsf{Comm}}
\newcommand{\Cor}[0]{{\mathsf{Cor}}}
\newcommand{\Fin}[0]{{\mathsf{Fin}}}
\newcommand{\Free}[0]{\mathsf{Free}}
\newcommand{\Perf}[0]{\mathsf{Perf}}
\newcommand{\Unital}[0]{\mathsf{Unital}}
\newcommand{\eff}[0]{\mathsf{eff}}
\newcommand{\derivedcat}[1]{\mathbf{D} {#1} }
\newcommand{\Cx}[0]{\mathsf{Ch}}
\newcommand{\Stable}[0]{\mathsf{Stab}}
\newcommand{\ChainCx}[1]{\mathsf{Ch}\qty{ #1 } }
\newcommand{\Vect}[0]{{ \mathsf{Vect} }}


% Rings
\newcommand{\Fieldsover}[1]{{ \mathsf{Fields}_{#1} }}
\newcommand{\Field}[0]{\mathsf{Field}}
\newcommand{\Ring}[0]{\mathsf{Ring}}
\newcommand{\CRing}[0]{\mathsf{CRing}}
\newcommand{\DedekindDomain}[0]{\mathsf{DedekindDom}}

% Modules
\newcommand{\modr}[0]{{\mathsf{Mod}\dash\mathsf{R}}}
\newcommand{\modsleft}[1]{\mathsf{#1}\dash\mathsf{Mod}}
\newcommand{\modsright}[1]{\mathsf{Mod}\dash\mathsf{#1}}
\newcommand{\mods}[1]{{\mathsf{#1}\dash\mathsf{Mod}}}
\newcommand{\bimod}[2]{({#1}, {#2})\dash\mathsf{biMod}}
\newcommand{\Mod}[0]{{\mathsf{Mod}}}

\newcommand{\zmod}[0]{{\mathbb{Z}\dash\mathsf{Mod}}}
\newcommand{\rmod}[0]{{\mathsf{R}\dash\mathsf{Mod}}}
\newcommand{\kmod}[0]{{\mathsf{k}\dash\mathsf{Mod}}}
\newcommand{\gmod}[0]{{\mathsf{G}\dash\mathsf{Mod}}}
\newcommand{\grMod}[0]{{\mathsf{grMod}}}
\newcommand{\gr}[0]{{\mathsf{gr}\,}}
\newcommand{\mmod}[0]{{\dash\mathsf{Mod}}}
\newcommand{\Rep}[0]{{\mathsf{Rep}}}

% Vector Spaces and Bundles
\newcommand{\VectBundle}[0]{{ \Bun_{\GL_r} }}
\newcommand{\VectBundlerk}[1]{{ \Bun_{\GL_{#1}} }}
\newcommand{\VectSp}[0]{{ \VectSp }}
\newcommand{\VectBun}[0]{{ \VectBundle }}
\newcommand{\VectBunrk}[1]{{ \VectBundlerk{#1} }}


% Algebras
\newcommand{\alg}[0]{\mathsf{Alg}}
\newcommand{\Alg}[0]{{\mathsf{Alg}}}
\newcommand{\scalg}[0]{\mathsf{sCAlg}}
\newcommand{\cAlg}[0]{{\mathsf{cAlg}}}
\newcommand{\calg}[0]{\mathsf{CAlg}}
\newcommand{\liegmod}[0]{{\mathfrak{g}\dash\mathsf{Mod}}}
\newcommand{\liealg}[0]{{\mathsf{Lie}\dash\mathsf{Alg}}}
\newcommand{\kalg}[0]{{\mathsf{Alg}_{/k} }}
\newcommand{\kAlg}[0]{{\mathsf{Alg}_{/k} }}
\newcommand{\kSch}[0]{{\mathsf{Sch}_{/k}}}
\newcommand{\rAlg}[0]{{\mathsf{Alg}_{/R}}}
\newcommand{\ralg}[0]{{\mathsf{Alg}_{/R}}}
\newcommand{\CCalg}[0]{{\mathsf{Alg}_{\mathbb{C}} }}
\newcommand{\cdga}[0]{{\mathsf{cdga} }}

% Schemes and Sheaves
\newcommand{\Ringedspace}[0]{\mathsf{RingSp}}
\newcommand{\DCoh}[0]{{\mathsf{DCoh}}}
\newcommand{\QCoh}[0]{{\mathsf{QCoh}}}
\newcommand{\Cov}[0]{{\mathsf{Cov}}}
\newcommand{\sch}[0]{{\mathsf{Sch}}}
\newcommand{\presh}[0]{ \underset{ \mathsf{pre} } {\mathsf{Sh} }}
\newcommand{\prest}[0]{ {\underset{ \mathsf{pre} } {\mathsf{St} } } }
\newcommand{\Descent}[0]{{\mathsf{Descent}}}
\newcommand{\Desc}[0]{{\mathsf{Desc}}}
\newcommand{\FFlat}[0]{{\mathsf{FFlat}}}
\newcommand{\Perv}[0]{\mathsf{Perv}}
\newcommand{\smsch}[0]{{ \smooth\Sch }}
\newcommand{\Sch}[0]{{\mathsf{Sch}}}
\newcommand{\Schf}[0]{{\mathsf{Schf}}}
\newcommand{\Sh}[0]{{\mathsf{Sh}}}
\newcommand{\St}[0]{{\mathsf{Stack}}}
\newcommand{\Vark}[0]{{\mathsf{Var}_{/k} }}
\newcommand{\Var}[0]{{\mathsf{Var}}}
\newcommand{\Open}[0]{{\mathsf{Open}}}

% Homotopy
\newcommand{\CW}[0]{{\mathsf{CW}}}
\newcommand{\sSet}[0]{{\mathsf{sSet}}}
\newcommand{\ssets}[0]{\mathsf{sSet}}
\newcommand{\hoTop}[0]{{\mathsf{hoTop}}}
\newcommand{\hoType}[0]{{\mathsf{hoType}}}
\newcommand{\ho}[0]{{\mathsf{ho}}}
\newcommand{\SHC}[0]{{\mathsf{SHC}}}
\newcommand{\SH}[0]{{\mathsf{SH}}}
\newcommand{\Spaces}[0]{{\mathsf{Spaces}}}
\newcommand{\Spectra}[0]{{\mathsf{Sp}}}
\newcommand{\Sp}[0]{{\mathsf{Sp}}}
\newcommand{\Top}[0]{{\mathsf{Top}}}

% Infty Cats
\newcommand{\Finset}[0]{{\mathsf{FinSet}}}
\newcommand{\Cat}[0]{\mathsf{Cat}}
\newcommand{\Grpd}[0]{{\mathsf{Grpd}}}
\newcommand{\inftyGrpd}[0]{{\infty\dash\mathsf{Grpd}}}
\newcommand{\Fun}[0]{{\mathsf{Fun}}}
\newcommand{\Kan}[0]{{\mathsf{Kan}}}
\newcommand{\Monoid}[0]{\mathsf{Mon}}

% New?
\newcommand{\Prism}[0]{\mathsf{Prism}}
\newcommand{\Solid}[0]{\mathsf{Solid}}
\newcommand{\WCart}[0]{\mathsf{WCart}}

% Motivic
\newcommand{\Torsor}[1]{{\mathsf{#1}\dash\mathsf{Torsor}}}
\newcommand{\Torsorleft}[1]{{\mathsf{#1}\dash\mathsf{Torsor}}}
\newcommand{\Torsorright}[1]{{\mathsf{Torsor}\dash\mathsf{#1} }}
\newcommand{\Quadform}[0]{{\mathsf{QuadForm}}}
\newcommand{\HI}[0]{{\mathsf{HI}}}
\newcommand{\DM}[0]{{\mathsf{DM}}}
\newcommand{\hoA}[0]{{\mathsf{ho}_*^{\scriptstyle \AA^1}}}

% Unsorted
\newcommand{\FGL}[0]{\mathsf{FGL}}
\newcommand{\FI}[0]{{\mathsf{FI}}}
\newcommand{\Fuk}[0]{{\mathsf{Fuk}}}
\newcommand{\Lag}[0]{{\mathsf{Lag}}}
\newcommand{\Mfd}[0]{{\mathsf{Mfd}}}
\newcommand{\Riem}[0]{\mathsf{Riem}}
\newcommand{\Wein}[0]{{\mathsf{Wein}}}
\newcommand{\dgens}[1]{\gens{\gens{ #1 }}}
\newcommand{\ctz}[1]{\, {\converges{{#1} \to\infty}\longrightarrow 0} \, }
\newcommand{\conj}[1]{{\overline{{#1}}}}
\newcommand{\complex}[1]{{#1}_{*}}

\newcommand{\floor}[1]{{\left\lfloor #1 \right\rfloor}}
\newcommand{\fourier}[1]{\widehat{#1}}
\newcommand{\embedsvia}[1]{\xhookrightarrow{#1}}
\newcommand{\openimmerse}[0]{\underset{\scriptscriptstyle O}{\hookrightarrow}}
\newcommand{\weakeq}[0]{\underset{\scriptscriptstyle W}{\rightarrow}}

\newcommand{\fromvia}[1]{\xleftarrow{#1}}
\newcommand{\generators}[1]{\left\langle{#1}\right\rangle}
\newcommand{\gens}[1]{\left\langle{#1}\right\rangle}
\newcommand{\globsec}[1]{{\mathsf{\Gamma}\qty{#1} }}

\newcommand{\equalsbecause}[1]{\overset{#1}{=}}
\newcommand{\congbecause}[1]{\overset{#1}{\cong}}
\newcommand{\congas}[1]{\underset{#1}{\cong}}
\newcommand{\isoas}[1]{\underset{#1}{\cong}}
\newcommand{\addbase}[1]{{ {}_{\pt} }}
\newcommand{\ideal}[1]{\mathcal{#1}}
\newcommand{\adjoin}[1]{ { \left[ {#1} \right] } }
\newcommand{\powerseries}[1]{ { \left[ {#1} \right] } }
\newcommand{\htyclass}[1]{ { \left[ {#1} \right] } }
\newcommand{\formalpowerseries}[1]{ { \left[\left[ {#1} \right] \right] } }
\newcommand{\formalseries}[1]{ { \left[\left[ {#1} \right] \right] } }
\newcommand{\qtext}[1]{{\quad \operatorname{#1} \quad}}
\newcommand{\abs}[1]{{\left\lvert {#1} \right\rvert}}
\newcommand{\stack}[1]{\mathclap{\substack{ #1 }}} 

\newcommand\tmf{ \mathrm{tmf} }
\newcommand\taf{ \mathrm{taf} }
\newcommand\TAF{ \mathrm{TAF} }
\newcommand\TMF{ \mathrm{TMF} }

\newcommand{\BO}[0]{{\operatorname{BO}}}
\newcommand{\BP}[0]{{\operatorname{BP}}}
\newcommand{\BU}[0]{{\operatorname{BU}}}

\newcommand{\MO}[0]{{\operatorname{MO}}}
\newcommand{\MSO}[0]{{\operatorname{MSO}}}
\newcommand{\MSpin}[0]{{\operatorname{MSpin}}}
\newcommand{\MSp}[0]{{\operatorname{MSpin}}}
\newcommand{\MString}[0]{{\operatorname{MString}}}
\newcommand{\MStr}[0]{{\operatorname{MString}}}
\newcommand{\MU}[0]{{\operatorname{MU}}}


\newcommand{\KO}[0]{{\operatorname{KO}}}
\newcommand{\KU}[0]{{\operatorname{KU}}}

\newcommand{\smashprod}[0]{\wedge}

\newcommand{\ku}[0]{{\operatorname{ku}}}
\newcommand{\hofib}[0]{{\operatorname{hofib}}}
\newcommand{\hocofib}[0]{{\operatorname{hocofib}}}
\newcommand*\dif{\mathop{}\!\operatorname{d}}
\newcommand*{\horzbar}{\rule[.5ex]{2.5ex}{0.5pt}}
\newcommand*{\vertbar}{\rule[-1ex]{0.5pt}{2.5ex}}
\newcommand\Fix{ \mathrm{Fix} }
\newcommand\Ell{ \mathrm{Ell} }
\newcommand\Kahler[0]{\operatorname{Kähler}}
\newcommand\Prinbun{\mathrm{Bun}^{\mathrm{prin}}}
\newcommand\aug{\fboxsep=-\fboxrule\!\!\!\fbox{\strut}\!\!\!}
\newcommand\compact[0]{\operatorname{cpt}}
\newcommand\hyp[0]{{\operatorname{hyp}}}
\newcommand\jan{\operatorname{Jan}}
\newcommand\curl{\operatorname{curl}}
\newcommand\kbar{ { \bar{k} } }
\newcommand\ksep{ { k\sep } }
\newcommand\mypound{\scalebox{0.8}{\raisebox{0.4ex}{\#}}}
\newcommand\rref{\operatorname{RREF}}
\newcommand\RREF{\operatorname{RREF}}
\newcommand{\Tatesymbol}{\operatorname{TateSymb}}
\newcommand\tilt[0]{ { \flat } }
\newcommand\vecc[2]{\textcolor{#1}{\textbf{#2}}}
\newcommand{\Af}[0]{{\mathbb{A}}}
\newcommand{\Ag}[0]{{\mathcal{A}_g}}
\newcommand{\Ahat}[0]{\hat{ \operatorname{A}}_g }
\newcommand{\Ann}[0]{\operatorname{Ann}}
\newcommand{\Arg}[0]{\operatorname{Arg}}
\newcommand{\Art}[0]{\operatorname{Art}}
\newcommand{\BB}[0]{{\mathbb{B}}}
\newcommand{\Betti}[0]{{\operatorname{Betti}}}
\newcommand{\CC}[0]{{\mathbb{C}}}
\newcommand{\CF}[0]{\operatorname{CF}}
\newcommand{\CH}[0]{{\operatorname{CH}}}
\newcommand{\CP}[0]{{\mathbb{CP}}}
\newcommand{\CY}{{ \text{CY} }}
\newcommand{\Cl}[0]{{ \operatorname{Cl}} }
\newcommand{\Crit}[0]{\operatorname{Crit}}
\newcommand{\DD}[0]{{\mathbb{D}}}
\newcommand{\DSt}[0]{{ \operatorname{DSt}}}
\newcommand{\Def}{\operatorname{Def} }
\newcommand{\Diffeo}[0]{{\operatorname{Diffeo}}}
\newcommand{\Diff}[0]{\operatorname{Diff}}
\newcommand{\Disjoint}[0]{\displaystyle\coprod}
\newcommand{\Disk}[0]{{\operatorname{Disk}}}
\newcommand{\Dist}[0]{\operatorname{Dist}}
\newcommand{\Div}[0]{\operatorname{Div}}
\newcommand{\EE}[0]{{\mathbb{E}}}
\newcommand{\EKL}[0]{{\mathrm{EKL}}}
\newcommand{\EO}[0]{{\operatorname{EO}}}
\newcommand{\Emb}[0]{{\operatorname{Emb}}}
\newcommand{\minor}[0]{{\operatorname{minor}}}
\newcommand{\Et}{\text{Ét}}
\newcommand{\trace}{\operatorname{tr}}
\newcommand{\Norm}{\operatorname{Nm}}
\newcommand{\Extpower}[0]{\bigwedge\nolimits}
\newcommand{\Extalgebra}[0]{\bigwedge\nolimits}
\newcommand{\Extalg}[0]{\Extalgebra}
\newcommand{\Extprod}[0]{\bigwedge\nolimits}
\newcommand{\Ext}{\operatorname{Ext} }
\newcommand{\FFbar}[0]{{ \bar{ \mathbb{F}} }}
\newcommand{\FFpn}[0]{{\mathbb{F}_{p^n}}}
\newcommand{\FFp}[0]{{\mathbb{F}_p}}
\newcommand{\FF}[0]{{\mathbb{F}}}
\newcommand{\FS}{{ \text{FS} }}
\newcommand{\Fil}[0]{{\operatorname{Fil}}}
\newcommand{\Flat}[0]{{\operatorname{Flat}}}
\newcommand{\Fpbar}[0]{\bar{\mathbb{F}_p}}
\newcommand{\Fpn}[0]{{\mathbb{F}_{p^n} }}
\newcommand{\Fppf}[0]{\mathrm{\operatorname{Fppf}}}
\newcommand{\Fp}[0]{{\mathbb{F}_p}}
\newcommand{\Frac}[0]{\operatorname{Frac}}
\newcommand{\GF}[0]{{\mathbb{GF}}}
\newcommand{\GG}[0]{{\mathbb{G}}}
\newcommand{\GL}[0]{\operatorname{GL}}
\newcommand{\GW}[0]{{\operatorname{GW}}}
\newcommand{\Gal}[0]{{ \mathsf{Gal}} }
\newcommand{\Gl}[0]{\operatorname{GL}}
\newcommand{\Gr}[0]{{\operatorname{Gr}}}
\newcommand{\HC}[0]{{\operatorname{HC}}}
\newcommand{\HFK}[0]{\operatorname{HFK}}
\newcommand{\HF}[0]{\operatorname{HF}}
\newcommand{\HHom}{\mathscr{H}\kern-2pt\operatorname{om}}
\newcommand{\HH}[0]{{\mathbb{H}}}
\newcommand{\HP}[0]{{\operatorname{HP}}}
\newcommand{\HT}[0]{{\operatorname{HT}}}
\newcommand{\HZ}[0]{{H\mathbb{Z}}}
\newcommand{\Hilb}[0]{\operatorname{Hilb}}
\newcommand{\Homeo}[0]{{\operatorname{Homeo}}}
\newcommand{\Honda}[0]{\mathrm{\operatorname{Honda}}}
\newcommand{\Hsh}{{ \mathcal{H} }}
\newcommand{\Id}[0]{\operatorname{Id}}
\newcommand{\Intersect}[0]{\displaystyle\bigcap}
\newcommand{\JCF}[0]{\operatorname{JCF}}
\newcommand{\RCF}[0]{\operatorname{RCF}}
\newcommand{\Jac}[0]{\operatorname{Jac}}
\newcommand{\KK}[0]{{\mathbb{K}}}
\newcommand{\KH}[0]{ \K^{\scriptscriptstyle \mathrm{H}} }
\newcommand{\KMW}[0]{ \K^{\scriptscriptstyle \mathrm{MW}} }
\newcommand{\KMimp}[0]{ \hat{\K}^{\scriptscriptstyle \mathrm{M}} }
\newcommand{\KM}[0]{ \K^{\scriptstyle\mathrm{M}} }
\newcommand{\Kah}[0]{{ \operatorname{Kähler} } }
\newcommand{\LC}[0]{{\mathrm{LC}}}
\newcommand{\LL}[0]{{\mathbb{L}}}
\newcommand{\Lie}[0]{\operatorname{Lie}}
\newcommand{\Log}[0]{\operatorname{Log}}
\newcommand{\MCG}[0]{{\operatorname{MCG}}}
\newcommand{\MM}[0]{{\mathcal{M}}}
\newcommand{\MW}[0]{\operatorname{MW}}
\newcommand{\Mat}[0]{\operatorname{Mat}}
\newcommand{\Mor}[0]{\operatorname{Mor}}
\newcommand{\NN}[0]{{\mathbb{N}}}
\newcommand{\NS}[0]{{\operatorname{NS}}}
\newcommand{\OO}[0]{{\mathcal{O}}}
\newcommand{\OP}[0]{{\mathbb{OP}}}
\newcommand{\OX}[0]{{\mathcal{O}_X}}
\newcommand{\Obs}{\operatorname{Obs} }
\newcommand{\Ob}[0]{{\operatorname{Ob}}}
\newcommand{\Op}[0]{{\operatorname{Op}}}
\newcommand{\Orb}[0]{{\mathrm{Orb}}}
\newcommand{\Orth}[0]{{\operatorname{O}}}
\newcommand{\PD}[0]{\mathrm{PD}}
\newcommand{\PGL}[0]{\operatorname{PGL}}
\newcommand{\PP}[0]{{\mathbb{P}}}
\newcommand{\PSL}[0]{{\operatorname{PSL}}}
\newcommand{\Pic}[0]{{\operatorname{Pic}}}
\newcommand{\Pin}[0]{{\operatorname{Pin}}}
\newcommand{\Places}[0]{{\operatorname{Places}}}
\newcommand{\Presh}[0]{\presh}
\newcommand{\QHB}[0]{\operatorname{QHB}}
\newcommand{\QHS}[0]{\operatorname{QHS}}
\newcommand{\QQpadic}[0]{{ \QQ_p }}
\newcommand{\QQ}[0]{{\mathbb{Q}}}
\newcommand{\Quot}[0]{\operatorname{Quot}}
\newcommand{\RP}[0]{{\mathbb{RP}}}
\newcommand{\RR}[0]{{\mathbb{R}}}
\newcommand{\Rat}[0]{\operatorname{Rat}}
\newcommand{\Rees}[0]{{\operatorname{Rees}}}
\newcommand{\Reg}[0]{\operatorname{Reg}}
\newcommand{\Ric}[0]{\operatorname{Ric}}
\newcommand{\SF}[0]{\operatorname{SF}}
\newcommand{\SL}[0]{{\operatorname{SL}}}
\newcommand{\SNF}[0]{\mathrm{SNF}}
\newcommand{\SO}[0]{{\operatorname{SO}}}
\newcommand{\SP}[0]{{\operatorname{SP}}}
\newcommand{\SU}[0]{{\operatorname{SU}}}
\newcommand{\Sgn}[0]{{ \Sigma_{g, n} }}
\newcommand{\Sm}[0]{{\operatorname{Sm}}}
\newcommand{\SpSp}[0]{{\mathbb{S}}}
\newcommand{\Spec}[0]{\operatorname{Spec}}
\newcommand{\Spf}[0]{\operatorname{Spf}}
\newcommand{\Spinc}[0]{\mathrm{Spin}^{{c} }}
\newcommand{\Spin}[0]{{\operatorname{Spin}}}
\newcommand{\Sq}[0]{\operatorname{Sq}}
\newcommand{\Stab}[0]{{\operatorname{Stab}}}
\newcommand{\Sum}[0]{ \displaystyle\sum }
\newcommand{\Syl}[0]{{\operatorname{Syl}}}
\newcommand{\Sym}[0]{\operatorname{Sym}}
\newcommand{\Tensor}[0]{\bigotimes}
\newcommand{\Tor}[0]{\operatorname{Tor}}
\newcommand{\Hom}[0]{\operatorname{Hom}}
\newcommand{\Homcx}[0]{\operatorname{Hom}^{\bullet}}
\newcommand{\Tr}[0]{\operatorname{Tr}}
\newcommand{\Ug}[0]{{\mathcal{U}(\mathfrak{g}) }}
\newcommand{\Uh}[0]{{\mathcal{U}(\mathfrak{h}) }}
\newcommand{\Union}[0]{\displaystyle\bigcup}
\newcommand{\U}[0]{{\operatorname{U}}}
\newcommand{\Wedge}[0]{\bigwedge}
\newcommand{\Wittvectors}[0]{{\mathbb{W}}}
\newcommand{\ZHB}[0]{\operatorname{ZHB}}
\newcommand{\ZHS}[0]{\mathbb{Z}\operatorname{HS}}
\newcommand{\ZZG}[0]{{\mathbb{Z}G}}
\newcommand{\ZZH}[0]{{\mathbb{Z}H}}
\newcommand{\ZZlocal}[1]{{ \ZZ_{\hat{#1}} }}
\newcommand{\ZZpadic}[0]{{ \ZZ_p }}
\newcommand{\ZZ}[0]{{\mathbb{Z}}}
\newcommand{\Zar}[0]{{\mathrm{Zar}}}
\newcommand{\ZpZ}[0]{\mathbb{Z}/p}
\newcommand{\abuts}[0]{\Rightarrow}
\newcommand{\ab}[0]{{\operatorname{ab}}}
\newcommand{\actsonl}[0]{\curvearrowleft}
\newcommand{\actson}[0]{\curvearrowright}
\newcommand{\adjoint}[0]{\dagger}
\newcommand{\adj}[0]{\operatorname{adj}}
\newcommand{\ad}[0]{\operatorname{ad}}
\newcommand{\afp}[0]{A_{/\FF_p}}
\newcommand{\annd}[0]{{\operatorname{ and }}}
\newcommand{\ann}[0]{\operatorname{Ann}}
\newcommand{\arccot}[0]{\operatorname{arccot}}
\newcommand{\arccsc}[0]{\operatorname{arccsc}}
\newcommand{\arcsec}[0]{\operatorname{arcsec}}
\newcommand{\bP}[0]{\operatorname{bP}}
\newcommand{\barz}{\bar{z} }
\newcommand{\bbm}[0]{{\mathbb{M}}}
\newcommand{\bd}[0]{{\del}}
\newcommand{\bigast}[0]{{\mathop{\text{\Large $\ast$}}}}
\newcommand{\bmgn}[0]{{ \bar{\mathcal{M}}_{g, n} }}
\newcommand{\bundle}[1]{\mathcal{#1}}
\newcommand{\Bun}{{\mathsf{Bun}}}
\newcommand{\bung}{{\mathsf{Bun}_G}}
\newcommand{\by}[0]{\times}
\newcommand{\candim}[0]{\operatorname{candim}}
\newcommand{\chp}[0]{\operatorname{ch. p}}
\newcommand{\ch}[0]{\operatorname{ch}}
\newcommand{\cl}[0]{{ \operatorname{cl}} }
\newcommand{\codim}[0]{\operatorname{codim}}
\newcommand{\cohdim}[0]{\operatorname{cohdim}}
\newcommand{\coim}[0]{\operatorname{coim}}
\newcommand{\coker}[0]{\operatorname{coker}}
\newcommand{\cok}[0]{\operatorname{coker}}
\newcommand{\cone}[0]{\operatorname{cone}}
\newcommand{\conjugate}[1]{{\overline{{#1}}}}
\newcommand{\connectsum}[0]{\mathop{ \Large\mypound }}
\newcommand{\const}[0]{{\operatorname{const.}}}
\newcommand{\converges}[1]{\overset{#1}}
\newcommand{\convolve}[0]{\ast}
\newcommand{\correspond}[1]{\theset{\substack{#1}}}
\newcommand{\covers}[0]{\rightrightarrows}
\newcommand{\covol}[0]{\operatorname{covol}}
\newcommand{\cpt}[0]{{ \operatorname{compact} } }
\newcommand{\crit}[0]{\operatorname{crit}}
\newcommand{\cross}[0]{\times}
\newcommand{\dR}[0]{\mathrm{dR}}
\newcommand{\dV}{\,dV}
\newcommand{\dash}[0]{{\hbox{-}}}
\newcommand{\da}[0]{\coloneqq}
\newcommand{\ddd}[2]{{\frac{d #1}{d #2}\,}}
\newcommand{\ddim}[0]{\operatorname{ddim}}
\newcommand{\ddt}{\tfrac{\dif}{\dif t}}
\newcommand{\ddx}{\tfrac{\dif}{\dif x}}
\newcommand{\dd}[2]{{\frac{\partial #1}{\partial #2}\,}}
\newcommand{\decreasesto}[0]{\searrow}
\newcommand{\definedas}[0]{\coloneqq}
\newcommand{\del}[0]{{\partial}}
\newcommand{\diagonal}[1]{\Delta}
\newcommand{\diag}[0]{\operatorname{diag}}
\newcommand{\diam}[0]{{\operatorname{diam}}}
\newcommand{\diff}[0]{\operatorname{Diff}}
\newcommand{\directlim}[0]{\varinjlim}
\newcommand{\discriminant}[0]{{\Delta}}
\newcommand{\disc}[0]{{\operatorname{disc}}}
\newcommand{\disjoint}[0]{{\textstyle\coprod}}
\newcommand{\dist}[0]{\operatorname{dist}}
\newcommand{\dlog}[0]{\operatorname{dLog}}
\newcommand{\dom}[0]{\operatorname{dom}}
\newcommand{\dual}[0]{ {}^{ \vee }}
\newcommand{\dmu}{\,d\mu}
\newcommand{\dr}{\,dr}
\newcommand{\ds}{\,ds}
\newcommand{\dtheta}{\,d\theta}
\newcommand{\dt}{\,dt}
\newcommand{\du}{\,du}
\newcommand{\dw}{\,dw}
\newcommand{\dxi}{\,d\xi}
\newcommand{\dx}{\,dx}
\newcommand{\dA}{\,dA}
\newcommand{\dy}{\,dy}
\newcommand{\dzbar}{\,d\bar{z} }
\newcommand{\dzeta}{\,d\zeta}
\newcommand{\dz}{\,dz}
\newcommand{\embeds}[0]{\hookrightarrow}
\newcommand{\eo}[0]{{\operatorname{eo}}}
\newcommand{\eps}[0]{{\varepsilon}}
\newcommand{\essdim}[0]{\operatorname{essdim}}
\newcommand{\et}{\text{ét}}
\newcommand{\eul}[0]{{\operatorname{eul}}}
\newcommand{\evalfrom}[0]{\Big|}
\newcommand{\ext}{\operatorname{Ext} }
\newcommand{\ff}[0]{\operatorname{ff}}
\newcommand{\fppf}[0]{\mathrm{\operatorname{fppf}}}
\newcommand{\fpqc}[0]{\mathrm{\operatorname{fpqc}}}
\newcommand{\fp}[0]{\operatorname{fp}}
\newcommand{\fqr}[0]{{\mathbb{F}_{q^r}}}
\newcommand{\fq}[0]{{\mathbb{F}_{q}}}
\newcommand{\freeprod}[0]{\ast}
\newcommand{\from}[0]{\leftarrow}
\newcommand{\gal}[0]{{ \operatorname{Gal}} }
\newcommand{\gl}[0]{{\mathfrak{gl}}}
\newcommand{\gp}[0]{ {\operatorname{gp} } }
\newcommand{\grad}[0]{\operatorname{grad}}
\newcommand{\grdim}[0]{{\operatorname{gr\,dim}}}
\newcommand{\height}[0]{\operatorname{ht}}
\newcommand{\homotopic}[0]{\simeq}
\newcommand{\id}[0]{\operatorname{id}}
\newcommand{\im}[0]{\operatorname{im}}
\newcommand{\increasesto}[0]{\nearrow}
\newcommand{\inftycat}[0]{{ \underset{\infty}{ \Cat}  }}
\newcommand{\injectivelim}[0]{\varinjlim}
\newcommand{\injects}[0]{\hookrightarrow}
\newcommand{\inner}[2]{{\left\langle {#1},~{#2} \right\rangle}}
\newcommand{\interior}[0]{^\circ}
\newcommand{\intersect}[0]{\cap}
\newcommand{\into}[0]{\to}
\newcommand{\inverselim}[0]{\varprojlim}
\newcommand{\inv}[0]{^{-1}}
\newcommand{\ip}[2]{{\left\langle {#1},~{#2} \right\rangle}}
\newcommand{\isomorphic}{{ \, \mapsvia{\sim}\, }}
\newcommand{\iso}{{ \isomorphic  }}
\newcommand{\kG}[0]{{kG}}
\newcommand{\kfq}[0]{K_{/\mathbb{F}_q}}
\newcommand{\kk}[0]{{\mathbb{k}}}
\newcommand{\ko}[0]{{\operatorname{ko}}}
\newcommand{\krulldim}[0]{\operatorname{krulldim}}
\newcommand{\ks}[0]{\operatorname{ks}}
\newcommand{\kxn}[0]{k[x_1, \cdots, x_{n}]}
\newcommand{\kx}[1]{k[x_1, \cdots, x_{#1}]}
\newcommand{\lci}[0]{\mathrm{lci}}
\newcommand{\lcm}[0]{\operatorname{lcm}}
\newcommand{\liealgk}[0]{{ \liealg_{/k} }}
\newcommand{\liea}[0]{{\mathfrak{a}}}
\newcommand{\lieb}[0]{{\mathfrak{b}}}
\newcommand{\lied}[0]{{\mathfrak{d}}}
\newcommand{\lief}[0]{{\mathfrak{f}}}
\newcommand{\liegl}[0]{{\mathfrak{gl}}}
\newcommand{\lieg}[0]{{\mathfrak{g}}}
\newcommand{\lieh}[0]{{\mathfrak{h}}}
\newcommand{\liel}[0]{{\mathfrak{l}}}
\newcommand{\lien}[0]{{\mathfrak{n}}}
\newcommand{\lieo}[0]{{\mathfrak{o}}}
\newcommand{\lier}[0]{{\mathfrak{r}}}
\newcommand{\liesl}[0]{{\mathfrak{sl}}}
\newcommand{\lieso}[0]{{\mathfrak{so}}}
\newcommand{\liesp}[0]{{\mathfrak{sp}}}
\newcommand{\liet}[0]{{\mathfrak{t}}}
\newcommand{\lieu}[0]{{\mathfrak{u}}}
\newcommand{\lk}[0]{\operatorname{lk}}
\newcommand{\loc}[0]{{\mathsf{loc}}}
\newcommand{\mTHH}[0]{{\operatorname{THH}}}
\newcommand{\mHH}[0]{{\operatorname{HH}}}
\newcommand{\TCH}[0]{{\operatorname{TCH}}}
\newcommand{\TC}[0]{{\operatorname{TC}}}
\newcommand{\THC}[0]{{\operatorname{THC}}}
\newcommand{\THoH}[0]{{\operatorname{THH}}}
\newcommand{\HoH}[0]{{\operatorname{HH}}}
\newcommand{\TP}[0]{{\operatorname{TP}}}
\newcommand{\TT}[0]{{\mathbb{T}}}
\newcommand{\mapscorrespond}[2]{\mathrel{\operatorname*{\rightleftharpoons}_{#2}^{#1}}}
\newcommand{\mapstofrom}[0]{\rightleftharpoons}
\newcommand{\mapstovia}[1]{\xmapsto{#1}}
\newcommand{\mapsvia}[1]{\xrightarrow{#1}}
\newcommand{\injectsvia}[1]{\xhookrightarrow{#1}}
\newcommand{\injectsfromvia}[1]{\xhookleftarrow{#1}}
\newcommand{\maps}[0]{\operatorname{Maps}}
\newcommand{\mat}[0]{\operatorname{Mat}}
\newcommand{\maxspec}[0]{{\operatorname{maxSpec}}}
\newcommand{\mcTop}[0]{\mathcal{T}\mathsf{op}}
\newcommand{\mca}[0]{{\mathcal{A}}}
\newcommand{\mcb}[0]{{\mathcal{B}}}
\newcommand{\mcc}[0]{{\mathcal{C}}}
\newcommand{\mcd}[0]{{\mathcal{D}}}
\newcommand{\mce}[0]{{\mathcal{E}}}
\newcommand{\mcf}[0]{{\mathcal{F}}}
\newcommand{\mcg}[0]{{\mathcal{G}}}
\newcommand{\mch}[0]{{\mathcal{H}}}
\newcommand{\mci}[0]{{\mathcal{I}}}
\newcommand{\mcj}[0]{{\mathcal{J}}}
\newcommand{\mck}[0]{{\mathcal{K}}}
\newcommand{\mcl}[0]{{\mathcal{L}}}
\newcommand{\mcm}[0]{{\mathcal{M}}}
\newcommand{\mcp}[0]{{\mathcal{P}}}
\newcommand{\mcs}[0]{{\mathcal{S}}}
\newcommand{\mct}[0]{{\mathcal{T}}}
\newcommand{\mcu}[0]{{\mathcal{U}}}
\newcommand{\mcv}[0]{{\mathcal{V}}}
\newcommand{\mcx}[0]{{\mathcal{X}}}
\newcommand{\mcz}[0]{{\mathcal{Z}}}
\newcommand{\mfa}[0]{{\mathfrak{a}}}
\newcommand{\mfb}[0]{{\mathfrak{b}}}
\newcommand{\mfc}[0]{{\mathfrak{c}}}
\newcommand{\mff}[0]{{\mathfrak{f}}}
\newcommand{\mfi}[0]{{\mathfrak{I}}}
\newcommand{\mfm}[0]{{\mathfrak{m}}}
\newcommand{\mfn}[0]{{\mathfrak{n}}}
\newcommand{\mfp}[0]{{\mathfrak{p}}}
\newcommand{\mfq}[0]{{\mathfrak{q}}}
\newcommand{\mfr}[0]{{\mathfrak{r}}}
\newcommand{\mfs}[0]{{\mathfrak{s}}}
\newcommand{\mfy}[0]{{\mathfrak{Y}}}
\newcommand{\mfx}[0]{{\mathfrak{X}}}
\newcommand{\mg}[0]{{ \mathcal{M}_{g} }}
\newcommand{\mgn}[0]{{ \mathcal{M}_{g, n} }}
\newcommand{\minpoly}[0]{{\operatorname{minpoly}}}
\newcommand{\mltext}[1]{\left\{\begin{array}{c}#1\end{array}\right\}}
\newcommand{\mm}[0]{{\mathfrak{m}}}
\newcommand{\mot}[0]{{ \mathrm{mot}} }
\newcommand{\cell}[0]{{ \mathrm{cell}} }
\newcommand{\mspec}[0]{\operatorname{mSpec}}
\newcommand{\ms}[0]{\xrightarrow{\sim}}
\newcommand{\multinomial}[1]{\left(\!\!{#1}\!\!\right)}
\newcommand{\mult}[0]{{\operatorname{mult}}}
\newcommand{\mveq}[0]{{\mapsvia{\sim}}} 
\newcommand{\mviso}[0]{{\mapsvia{\sim}}} 
\newcommand{\nd}[0]{\operatorname{nd}}
\newcommand{\nilrad}[1]{{\sqrt{0_{#1}} }}
\newcommand{\jacobsonrad}[1]{{J ({#1}) }}
\newcommand{\nil}[0]{{\operatorname{nil}}}
\newcommand{\noeth}[0]{\mathrm{Noeth}}
\newcommand{\nonzero}[0]{^{\bullet}}
\newcommand{\normalneq}{\mathrel{\reflectbox{$\trianglerightneq$}}}
\newcommand{\normal}[0]{{~\trianglelefteq~}}
\newcommand{\norm}[1]{{\left\lVert {#1} \right\rVert}}
\newcommand{\notimplies}[0]{\centernot\implies}
\newcommand{\onto}[0]{\twoheadhthtarrow}
\newcommand{\open}[1]{\overset{\circ}{#1}}
\newcommand{\op}[0]{^{\operatorname{op}}}
\newcommand{\ord}[0]{{\operatorname{Ord}}}
\newcommand{\oriented}[0]{{ \operatorname{oriented} } }
\newcommand{\orr}[0]{{\operatorname{ or }}}
\newcommand{\padic}[0]{p\dash\text{adic}}
\newcommand{\pic}[0]{{\operatorname{Pic}}}
\newcommand{\pnorm}[2]{{\left\lVert {#1} \right\rVert}_{#2}}
\newcommand{\poly}[0]{\mathrm{poly}}
\newcommand{\prim}[0]{{\operatorname{prim}}}
\newcommand{\projectivelim}[0]{\varprojlim}
\newcommand{\pr}[0]{{\operatorname{pr}}}
\newcommand{\pt}[0]{{\operatorname{pt}}}
\newcommand{\qc}[0]{{\operatorname{qc}}}
\newcommand{\qst}[0]{{\quad \operatorname{such that} \quad}}
\newcommand{\rank}[0]{\operatorname{rank}}
\newcommand{\realpart}[1]{{\mathcal{Re}({#1})}}
\newcommand{\red}[0]{{ \text{red} }}
\newcommand{\reg}[0]{\mathrm{reg}}
\newcommand{\reldim}[0]{\operatorname{reldim}}
\newcommand{\restrictionof}[2]{ {\left.{{#1}} \right|_{{#2}} } }
\newcommand{\rk}[0]{{\operatorname{rank}}}
\newcommand{\rotate}[2]{{\style{display: inline-block; transform: rotate(#1deg)}{#2}}}
\newcommand{\ro}[2]{{ \left.{{#1}} \right|_{{#2}} }}
\newcommand{\selfmap}[0]{{\circlearrowleft}}
\newcommand{\semidirect}[0]{\rtimes}
\newcommand{\sep}[0]{{ {}^{ \operatorname{sep} } }}
\newcommand{\sgn}[0]{\operatorname{sgn}}
\newcommand{\shom}{ {\mathcal{H}}\kern-0.5pt{\operatorname{om}}}
\newcommand{\signature}[0]{\operatorname{sig}}
\newcommand{\sign}[0]{\operatorname{sign}}
\newcommand{\Sing}[0]{{\operatorname{Sing}}}
\newcommand{\sing}[0]{{\mathrm{sing}}}
\newcommand{\slope}[0]{{\mathrm{slope}}}
\newcommand{\smts}[1]{\setminus\theset{#1}}
\newcommand{\smz}[0]{\setminus\theset{0}}
\newcommand{\sm}[0]{\setminus}
\newcommand{\spanof}[0]{{\operatorname{span}}}
\newcommand{\spec}[0]{\operatorname{Spec}}
\newcommand{\stab}[0]{{\operatorname{Stab}}}
\newcommand{\stirlingfirst}[2]{\genfrac{[}{]}{0pt}{}{#1}{#2}}
\newcommand{\stirling}[2]{\genfrac\{\}{0pt}{}{#1}{#2}}
\newcommand{\st}[0]{{~\mathrel{\Big|}~}}
\newcommand{\surjectsvia}[2][]{ \xrightarrow[#1]{#2} { \mathrel{\mkern-16mu}\rightarrow }\, }
\newcommand{\surjects}[0]{\twoheadrightarrow}
\newcommand{\syl}[0]{{\operatorname{Syl}}}
\newcommand{\sym}[0]{\operatorname{Sym}}
\newcommand{\td}[0]{\mathrm{td}}
\newcommand{\tensor}[0]{\otimes}
\newcommand{\tgn}[0]{{ \mathcal{T}_{g, n} }}
\newcommand{\theset}[1]{\left\{{#1}\right\}}
\newcommand{\thetaref}[0]{{ \theta_{\mathrm{Ref} } }}
\newcommand{\thevector}[1]{{\left[ {#1} \right]}}
\newcommand{\thinrank}[0]{T_n\dash\operatorname{rank}}
\newcommand{\too}[1]{{\xrightarrow{#1}}}
\newcommand{\tors}[0]{{\operatorname{tors}}}
\newcommand{\tor}[0]{\operatorname{Tor}}
\newcommand{\transverse}[0]{\pitchfork}
\newcommand{\trdeg}[0]{\operatorname{trdeg}}
\newcommand{\trianglerightneq}{\mathrel{\ooalign{\raisebox{-0.5ex}{\reflectbox{\rotatebox{90}{$\nshortmid$}}}\cr$\triangleright$\cr}\mkern-3mu}}
\newcommand{\tr}[0]{{\mathrm{tr}}}
\newcommand{\tspt}[0]{{\{\operatorname{pt}\}}}
\newcommand{\ts}[1]{\left\{{#1}\right\}}
\newcommand{\tv}[1]{{\left[ {#1} \right]}}
\newcommand{\txand}[0]{{\operatorname{ and }}}
\newcommand{\txor}[0]{{\operatorname{ or }}}
\newcommand{\txt}[1]{{\operatorname{ {#1} }}}
\newcommand{\type}[0]{{\operatorname{type}}}
\newcommand{\uniformlyconverges}[0]{\rightrightarrows}
\newcommand{\union}[0]{\cup}
\newcommand{\unital}[0]{{\operatorname{unital}}}
\newcommand{\units}[0]{^{\times}}
\newcommand{\up}[0]{\uparrow}
\newcommand{\vhat}[1]{\widehat{ \vector{#1} }}
\newcommand{\vol}[0]{\operatorname{vol}}
\newcommand{\wait}[0]{{-}}
\newcommand{\wt}[0]{{\operatorname{wt}}}
\newcommand{\zar}[0]{{\mathrm{zar}}}
\newcommand{\zbar}{\bar{z} }
\newcommand{\zlnz}[0]{\mathbb{Z}/\ell^n\mathbb{Z}}
\newcommand{\zlz}[0]{\mathbb{Z}/\ell\mathbb{Z}}
\newcommand{\znz}[0]{\mathbb{Z}/n\mathbb{Z}}
\newcommand{\zpz}[0]{\mathbb{Z}/p\mathbb{Z}}

\renewcommand{\AA}[0]{{\mathbb{A}}}
\renewcommand{\SS}[0]{{\mathbb{S}}}
\renewcommand{\bar}[1]{\mkern 1.5mu\overline{\mkern-1.5mu#1\mkern-1.5mu}\mkern 1.5mu}
\renewcommand{\det}{\operatorname{det}}
\renewcommand{\div}[0]{\operatorname{Div}}
\renewcommand{\hat}[1]{\widehat{#1}}
\renewcommand{\labelitemiii}{$\diamondsuit$}
\renewcommand{\labelitemiv}{$\diamondsuit$}
\renewcommand{\mid}[0]{\mathrel{\Big|}}
\renewcommand{\mod}{\operatorname{mod}}
\renewcommand{\qed}[0]{\hfill\blacksquare}
\renewcommand{\too}[0]{\longrightarrow}
\renewcommand{\vector}[1]{\mathbf{#1}}

\DeclareMathOperator*{\supp}{supp}
\DeclareMathOperator*{\eq}{=}
\DeclareMathOperator*{\hocolim}{hocolim}
\DeclareMathOperator{\aut}{Aut}
\DeclareMathOperator{\Aut}{Aut}
\DeclareMathOperator{\Inn}{Inn}
\DeclareMathOperator{\Out}{Out}
\DeclareMathOperator{\BiHol}{BiHol}
\DeclareMathOperator{\Bl}{Bl}
\DeclareMathOperator{\Br}{Br}
\DeclareMathOperator{\Curv}{Curv}
\DeclareMathOperator{\Deck}{Deck}
\DeclareMathOperator{\Der}{Der}
\DeclareMathOperator{\Endo}{End}
\DeclareMathOperator{\Exists}{\exists}
\DeclareMathOperator{\Forall}{\forall}
\DeclareMathOperator{\Forget}{Forget}
\DeclareMathOperator{\Frame}{Frame}
\DeclareMathOperator{\Frob}{Frob}
\DeclareMathOperator{\Fr}{Fr}
\DeclareMathOperator{\Griff}{Griff}
\DeclareMathOperator{\Hol}{Hol}
\DeclareMathOperator{\Ind}{Ind}
\DeclareMathOperator{\Isom}{Isom}
\DeclareMathOperator{\Ld}{{\mathbb{L} }}
\DeclareMathOperator{\Maps}{Maps}
\DeclareMathOperator{\Map}{Maps}
\DeclareMathOperator{\OFrame}{OFrame}
\DeclareMathOperator{\Prin}{Prin}
\DeclareMathOperator{\Proj}{Proj}
\DeclareMathOperator{\RHom}{\mathbb{R}Hom}
\DeclareMathOperator{\Rad}{Rad}
\DeclareMathOperator{\Rd}{{\mathbb{R} }}
\DeclareMathOperator{\Res}{Res}
\DeclareMathOperator{\Suspendpinf}{{\Sigma_+^\infty}}
\DeclareMathOperator{\Symb}{Symb}
\DeclareMathOperator{\Taut}{Taut}
\DeclareMathOperator{\Th}{Th}
\DeclareMathOperator{\Triv}{Triv}
\DeclareMathOperator{\UFrame}{UFrame}
\DeclareMathOperator{\coInd}{coInd}
\DeclareMathOperator{\codom}{codom}
\DeclareMathOperator{\coh}{coh}
\DeclareMathOperator{\coind}{coInd}
\DeclareMathOperator{\coinfl}{coinf}
\DeclareMathOperator{\colspace}{colspace}
\DeclareMathOperator{\cores}{cores}
\DeclareMathOperator{\hd}{Head}
\DeclareMathOperator{\hilb}{Hilb}
\DeclareMathOperator{\ind}{ind}
\DeclareMathOperator{\infl}{inf}
\DeclareMathOperator{\len}{len}
\DeclareMathOperator{\nullity}{nullspace}
\DeclareMathOperator{\nullspace}{nullspace}
\DeclareMathOperator{\per}{per}
\DeclareMathOperator{\prin}{prin}
\DeclareMathOperator{\projection}{Proj}
\DeclareMathOperator{\proj}{proj}
\DeclareMathOperator{\range}{range}
\DeclareMathOperator{\rowspace}{rowspace}
\DeclareMathOperator{\soc}{Soc}
\DeclareMathOperator{\submfds}{SubMfds}

\newcommand{\Suchthat}[0]{\middle\vert}
\newcommand{\suchthat}[0]{{~\mathrel{\Big|}~}}
\newcommand{\delbar}[0]{{ \bar{\del}}}

\newcommand{\contains}[0]{\supseteq}
\newcommand{\containing}[0]{\supseteq}
\newcommand{\iscontainedin}[0]{\supseteq}

\newcommand{\rad}[1]{\sqrt{#1}}
\newcommand{\thecat}[1]{\mathbf{#1}}
\newcommand{\sheaf}[1]{\operatorname{\mathcal{#1}}}
\newcommand{\rightderive}[0]{{\mathbf{R}}}

\newcommand\rrarrows{\rightrightarrows}
\newcommand\rrrarrows{
    \mathrel{\substack{\textstyle\rightarrow\\[-0.6ex]
        \textstyle\rightarrow \\[-0.6ex]
        \textstyle\rightarrow}}
}



\newcommand\ul[1]{\underline{#1}}
\newcommand\constantsheaf[1]{\underline{#1}}
\newcommand\holomorphic[0]{\text{holo}}
\newcommand\std[0]{\text{std}}
\newcommand\Mero[0]{\operatorname{Mero}}
\newcommand\res[0]{\operatorname{res}}
\newcommand\even[0]{\text{even}}
\newcommand\odd[0]{\text{odd}}
\newcommand\hodgestar[0]{\star}
\newcommand\dirac[0]{\mkern-3mu \not{ \partial} }
\newcommand\laplacian[0]{\Delta}
\newcommand\Laplacian[0]{\Delta}
\newcommand\stardstar[0]{\hodgestar {d} \mkern-5mu \hodgestar}
\newcommand\covariant[0]{\nabla}
\newcommand\ol[1]{\overline{#1}}
\newcommand\univcover[1]{\overline{#1}}
\newcommand\closure[1]{\overline{#1}}
\newcommand\fps[1]{{\left[\left[ #1 \right]\right]  }}
\newcommand\laurent[1]{{\left(\left( #1 \right)\right)  }}
\newcommand\capprod{\frown}
\newcommand\cupprod{\smile}
\newcommand\Path{\mathcal{P}}
\newcommand\gradient{\nabla}

\newcommand\cechH[0]{{\check{H}}}
\newcommand\Hc[0]{{\check{H}}}
\newcommand\Cc[0]{{\check{C}}}
\newcommand\cupp[0]{\smile}
\newcommand\capp[0]{\frown}
\newcommand\sig[0]{\operatorname{sig}}
\newcommand\ev[0]{\operatorname{ev}}
\newcommand\coev[0]{\operatorname{coev}}

\newcommand{\fractional}[1]{\theset{#1}}
\newcommand{\fractionalpart}[1]{\theset{#1}}
\newcommand{\integerpart}[1]{\left[ {#1}\right] }
\newcommand{\zadjoin}[1]{\mathbb{Z}\left[ {#1} \right]}
\newcommand{\wedgeprod}[0]{\vee}
\newcommand{\Wedgepower}[0]{\bigwedge\nolimits}
\def\multichoose#1#2{{\left(\kern-.3em\left(\genfrac{}{}{0pt}{}{#1}{#2}\right)\kern-.3em\right)}}
\newcommand\elts[2]{{ {#1}_1, {#1}_2, \cdots, {#1}_{#2}}}
\newcommand\tselts[2]{{ \theset{ {#1}_1, {#1}_2, \cdots, {#1}_{#2} } }}
\newcommand\fiberproduct[1]{\underset{\scriptscriptstyle {#1} }{\times}}
\newcommand\fiberprod[1]{{ \fiberproduct{#1} }}
\newcommand\fprod[1]{{ \fiberproduct{#1} }}
\newcommand\smallprod[0]{{ \scriptscriptstyle\prod }}
\newcommand\sumpower[1]{{ {}^{ \scriptscriptstyle\oplus^{#1} }  }}
\newcommand\prodpower[1]{{ {}^{ \scriptscriptstyle\times^{#1} }  }}
\newcommand\tensorpower[2]{{ {}^{ \scriptstyle\otimes_{#1}^{#2} }  }}
\newcommand\derivedtensorpower[3]{{ {}^{ \scriptstyle {}_{#1} {\otimes_{#2}^{#3}} }  }}
\newcommand\smashpower[1]{{ {}^{ \scriptscriptstyle\smashprod^{#1} }  }}

\newcommand{\Tot}[0]{{ \operatorname{Tot} }}
\newcommand{\Totsum}[0]{\Tot^{\oplus}}
\newcommand{\Totprod}[0]{\Tot^{\Pi}}
\newcommand{\xpn}[0]{ { x^{p^n} } }
\newcommand{\Qbar}[0]{{ \bar{ \mathbb{Q} } }}

\newcommand{\Loop}[0]{{\Omega}}
\newcommand{\Loopinf}[0]{{\Omega}^\infty}
\newcommand{\Suspend}[0]{{\Sigma}}
\newcommand{\ptd}{{\scriptstyle { * } }}
\newcommand{\fin}[0]{{\mathrm{fin}}}
\newcommand{\can}[0]{{\mathrm{can}}}
\newcommand{\ess}[0]{{\mathrm{ess}}}
\newcommand{\fd}[0]{{\mathrm{fd}}}
\newcommand{\fg}[0]{{\mathrm{fg}}}
\newcommand{\qproj}[0]{{\mathrm{qproj}}}
\newcommand{\irr}[0]{{\mathrm{irr}}}
\newcommand{\ft}[0]{{\mathrm{ft}}}
\newcommand{\smol}[0]{{\mathrm{small}}}
\newcommand{\alev}[0]{{\,\mathrm{a.e.}}}
\newcommand{\semisimple}[0]{{\operatorname{ss}}}
\newcommand{\gon}[0]{{\dash\mathrm{gon}}}
\newcommand{\semi}[0]{{\operatorname{semi}}}
\newcommand{\inc}[0]{{\operatorname{inc}}}
\newcommand{\Ball}[0]{{B}}
\newcommand{\hq}[0]{{/}}
\newcommand{\unioninfty}[0]{{\union\ts{\infty}}}
\newcommand{\dualnumbers}[0]{{ [\eps] / \eps^2 }}
\newcommand{\crys}[0]{{\mathrm{crys}}}
\newcommand{\Xff}[0]{{X_\mathrm{FF}}}
\newcommand{\an}[0]{{\mathrm{an}}}
\newcommand{\Nis}[0]{{\mathrm{Nis}}}
\newcommand{\perf}[0]{{\mathrm{perf}}}

\newcommand{\quillenplus}[0]{{ {}^{+} }}
\newcommand{\glue}[1]{{ \Disjoint_{#1} }}
\newcommand{\normcomplex}[1]{{\norm{\complex{#1}}}}
\newcommand{\nerve}[1]{{ \mathcal{N}({#1}) }}
\newcommand{\realize}[1]{{ \abs{#1} }}

\newcommand{\localize}[1]{ \left[ { \scriptstyle #1\inv } \right]}
\newcommand{\sheafify}[1]{ \left( #1 \right)^{\scriptscriptstyle \mathrm{sh}} }
\newcommand{\complete}[1]{{ {}_{ \hat{#1} } }}
\newcommand{\takecompletion}[1]{{ \overbrace{#1}^{\widehat{\hspace{4em}}}  }}
\newcommand{\twistleft}[2]{{ {}^{#1} #2 }}
\newcommand{\twistright}[2]{{ #2 {}^{#1} }}
\newcommand{\liesover}[1]{{ {}_{/ {#1}} }}
\newcommand{\liesabove}[1]{{ {}_{/ {#1}} }}
\newcommand{\slice}[1]{_{/ {#1}} }
\newcommand{\quotright}[2]{ {}^{#1}\mkern-2mu/\mkern-2mu_{#2} }
\newcommand{\quotleft}[2]{ {}_{#2}\mkern-.5mu\backslash\mkern-2mu^{#1} }
\newcommand{\invert}[1]{{ \left[ { \scriptstyle \frac{1}{#1} } \right] }}
\newcommand{\pcomplete}[0]{{ {}^{ \wedge }_{p} }}
\newcommand{\symb}[2]{{ \qty{ #1 \over #2 } }}


\newcommand{\B}[0]{{\mathsf{B}}}
\newcommand{\E}[0]{{\mathsf{E}}}
\newcommand{\T}[0]{{\mathsf{T}}}
\newcommand{\K}[0]{{\mathsf{K}}}
\newcommand{\G}[0]{{\mathsf{G}}}
%\newcommand{\H}[0]{{\mathsf{H}}}
\newcommand{\D}{{ \mathsf{D} }}
\newcommand{\mH}{{ \mathsf{H} }}
\newcommand{\BGL}[0]{ \mathsf{B}\mkern-3mu \operatorname{GL} }

\newcommand{\RM}[1]{%
  \textup{\uppercase\expandafter{\romannumeral#1}}%
}
\DeclareMathOperator{\righttriplearrows} {{\; \tikz{ \foreach \y in {0, 0.1, 0.2} { \draw [-stealth] (0, \y) -- +(0.5, 0);}} \; }}
\DeclareMathOperator*{\mapbackforth}{\rightleftharpoons}
\newcommand{\fourcase}[4]{
\begin{cases}{#1} & {#2} \\ {#3} & {#4}\end{cases} 
}
\newcommand{\matt}[4]{{
\begin{bmatrix}
  {#1} & {#2} 
\\
  {#3} & {#4}
\end{bmatrix}
}}
\newcommand{\mattt}[9]{{
\begin{bmatrix}
  {#1} & {#2} & {#3}
\\
  {#4} & {#5} & {#6}
\\
  {#7} & {#8} & {#9}
\end{bmatrix}
}}

\newcommand\stacksymbol[3]{
  \mathrel{\stackunder[2pt]{\stackon[4pt]{$#3$}{$\scriptscriptstyle#1$}}{
  $\scriptscriptstyle#2$}}
}
\newcommand{\textoperatorname}[1]{
  \operatorname{\textnormal{#1}}
}



%\newcommand{\strike}[1]{{\enclose{\horizontalstrike}{#1}}}
\DeclarePairedDelimiter{\ceil}{\lceil}{\rceil}

# Friday, July 30

References:

- Course website: <https://sites.math.washington.edu/~jarod/math582C.html>
- [Gómez 99: Expository article on algebraic stacks](https://arxiv.org/pdf/math/9911199.pdf)


:::{.remark}
Stated goal of the course: prove that the moduli space $\bar{\mg}$ of stable curves (for $g\geq 2$) is a smooth, proper, irreducible Deligne-Mumford stack of dimension $3g-3$.
Moreover, it admits a projective coarse moduli space.

In the process we'll define **algebraic spaces** and **stacks**.

Prerequisites:

- Schemes
- Existence of Hilbert schemes
- Artin approximation
- Resolution of singularities for surfaces
- Deformation theory

:::


# Lecture 3: Groupoids and Prestacks (Monday, September 06)

## Groupoids 

:::{.remark}
Last time: functors, sheaves on sites, descent, and Artin approximation.
Today: groupoids and stacks.

Recall that a **site** $\cat{S}$ is a category such that for all $U\in \Ob(\cat{S})$, there exists a set $\Cov(U) \da \ts{U_i \to U}_{i\in I}$ (a *covering family*) such that

- $\id_U \in \Cov(U)$,
- $\Cov(U)$ is closed under composition.
- $\Cov(U)$ is closed under pullbacks:

\begin{tikzcd}
	{\exists U_i\fiberprod{U}V} && {U_i} \\
	\\
	V && U
	\arrow["{\in \Cov(U)}", from=1-3, to=3-3]
	\arrow[from=3-1, to=3-3]
	\arrow[dashed, from=1-1, to=1-3]
	\arrow[dashed, from=1-1, to=3-1]
	\arrow["\lrcorner"{anchor=center, pos=0.025}, draw=none, from=1-1, to=3-3]
	\arrow["{\in\Cov(U)}"{description}, curve={height=-12pt}, dashed, from=1-1, to=3-3]
\end{tikzcd}

> [Link to Diagram](https://q.uiver.app/?q=WzAsNCxbMiwyLCJVIl0sWzAsMiwiViJdLFsyLDAsIlVfaSJdLFswLDAsIlxcZXhpc3RzIFVfaVxcZmliZXJwcm9ke1V9ViJdLFsyLDAsIlxcaW4gXFxDb3YoVSkiXSxbMSwwXSxbMywyLCIiLDAseyJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJkYXNoZWQifX19XSxbMywxLCIiLDIseyJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJkYXNoZWQifX19XSxbMywwLCIiLDEseyJzdHlsZSI6eyJuYW1lIjoiY29ybmVyIn19XSxbMywwLCJcXGluXFxDb3YoVSkiLDEseyJjdXJ2ZSI6LTIsInN0eWxlIjp7ImJvZHkiOnsibmFtZSI6ImRhc2hlZCJ9fX1dXQ==)

:::

:::{.example title="The big étale site"}
Take $\cat{S} \da \Sch_{\Et}$ to be the big étale site: the category of all schemes, with covering families given by étale morphisms $\ts{U_i\to U}_{i\in I}$ such that $\Disjoint_i U_i \surjects U$.
Note that there is a special covering family given by *surjective* etale morphisms.

\todo[inline]{Reducing to case of single surjective etale cover somehow?}

:::

:::{.definition title="Sheaves on sites"}
Let $\cat{C}$ be a category (e.g. $\cat C \da \Set$) and recall that a *presheaf* on a category $\cat S$ is a contravariant functor $\cat{S}\to \cat{C}$.

A $\cat{C}\dash$valued **sheaf** on a site $\cat{S}$ is a presheaf 
\[
\mcf:\cat{S} \to \cat{C}
\]
such that for all $U_i, U_j\in \Cov(U)$,
the following equalizer diagram is exact in $\cat{C}$

\begin{tikzcd}
    0
    \stackarr{1}[r]
    &
    F(U)
    \stackarr{3}[r]
    &
	\prod\limits_{i} F(U_i)
    \stackarr{5}[r]
	&
    \prod\limits_{i, j} F(U_i \fiberprod{U}  U_j)
\end{tikzcd}

:::

:::{.exercise title="Criterion for sheaves on the big etale site"}
Show that a presheaf $F$ is a sheaf on $\Sch_\Et$ iff 

- $F$ is a sheaf on $\Sch_\Zar$ and 
- For all etale surjections $U' \surjects_{\et} U$ of affines, the equalizer diagram is exact.

:::

:::{.proposition title="Yoneda"}
For $X\in \Sch$, the presheaf 
\[
h_X \da \Mor(\wait, X): \Sch \to \Set
\]
is a sheaf on $\Sch_{\Et}$.

:::

:::{.remark}
We'll often consider *moduli functors*: functors $F: \Sch \to \Set$ where $F(S)$ is a family of objects over $S$.
Then $F$ will be a sheaf iff families glue uniquely in the étale topology, and representability of such functors will imply they are sheaves.
:::

:::{.example title="A non-sheaf"}
Consider the following moduli functor:


\begin{tikzpicture}
\node {%
  \(\begin{aligned}
    F_{\Alg}: \Sch &\to \Set \\
	S &\mapsto
	\left\{
	\begin{tikzcd}
	\mathcal{C}
	  \ar[d] 
	\\
	S 
	\end{tikzcd}
	\right.
	\begin{aligned}
	\text{Smooth families of}\\
	\text{genus $g$ curves.}
	\end{aligned}
  \end{aligned}\)
};
\end{tikzpicture}


This is *not* representable by a scheme and not a sheaf.
:::

:::{.remark}
Why care about representability?
Suppose there were a scheme $M$, so 
\[
F_{\Alg}(S) \simeq \Mor(S, M)
.\]
Then taking $\id_M \in \Mor(M, M)$ should yield a universal family $\mcu \to M$:

![](figures/2021-09-06_14-50-50.png)

Then the points of $M$ would correspond to isomorphism classes of curves, and every family of curves would be a pullback of this.

For any $S\in\Sch$ and a family $\mcc \mapsvia{f} S$, the fiber $f\inv(s)\in\mcc$ is a curve for any $s\in S$,
so one could define a map 
\[
g: S &\to M \\
s &\mapsto [s]
,\]
where we send a curve to its isomorphism class.
Then $\mcc$ would fit into a pullback diagram:

\begin{tikzcd}
	\mcc && \mcu \\
	\\
	S && M
	\arrow[from=1-3, to=3-3]
	\arrow[from=3-1, to=3-3]
	\arrow[from=1-1, to=3-1]
	\arrow[dashed, from=1-1, to=1-3]
	\arrow["\lrcorner"{anchor=center, pos=0.125}, draw=none, from=1-1, to=3-3]
\end{tikzcd}

> [Link to Diagram](https://q.uiver.app/?q=WzAsNCxbMCwwLCJcXG1jYyJdLFsyLDAsIlxcbWN1Il0sWzAsMiwiUyJdLFsyLDIsIk0iXSxbMSwzXSxbMiwzXSxbMCwyXSxbMCwxLCIiLDAseyJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJkYXNoZWQifX19XSxbMCwzLCIiLDEseyJzdHlsZSI6eyJuYW1lIjoiY29ybmVyIn19XV0=)

If $S$ was itself a curve, then $g: S\to M$ would be a path in $M$ deforming a base curve.
:::

## Groupoids

:::{.remark}
Recall that a **groupoid** is a category where every morphism is an isomorphism.
Morphisms of groupoids are functors, and isomorphisms of groupoids are equivalences of categories.

:::

:::{.example title="Groupoid of a set"}
A basic example is the category of sets where 
\[
\Mor(A, B) \da 
\begin{cases}
\id_A & A=B 
\\
\emptyset & \text{else}.
\end{cases}
\]

A similar construction: for any set $\Sigma$, one can form a groupoid $\mcc_\Sigma$:

- Object: Elements $x\in \Sigma$.
- Morphisms: $\id_x$

:::

:::{.example title="Moduli of curves"}
Define a category $\mg(\CC)$:

- Objects: smooth projective curves over $\CC$ of genus $g$.
- Morphisms: 
\[
\Mor(C, C') = \Isom_{\Sch\slice\CC}(C, C') \subseteq \Mor_{\Sch\slice\CC}(C, C')
.\]
:::

:::{.example title="Equivalence of groupoids"}
Groupoids are equivalent iff they are equivalent as categories.
The following is an example of mapping the quotient groupoid $[C_2/C_4]$ to $\B C_2$:

![](figures/2021-09-06_19-13-21.png)


:::

:::{.example title="Groupoids equivalent to sets"}
If a groupoid $\mfx$ is equivalent to $\cat{C}_{\Sigma}$ for any $\Sigma \in \Set$, we say $\mfx$ is **equivalent to a set**.
For example, the following groupoid is equivalent to a 2-element set:

![](figures/2021-09-06_19-15-23.png)

:::

:::{.example title="Quotient groupoids"}
For $G\actson \Sigma$ a group acting on any set, define the **quotient groupoid** $[\Sigma/G]$ in the following way:

- Objects: $x\in \Sigma$, i.e. one object for each element of the set $\Sigma$.
- Morphisms: $\Mor(x, x') = \ts{g\in G \st gx' = x}$.

:::

:::{.exercise title="Groupoids equivalent to sets"}
Show that $[\Sigma/G]$ is equivalent to a set iff $G\actson \Sigma$ is a free action.
:::

:::{.example title="Classifying stacks"}
For $\Sigma = \ts{\pt}$, we obtain 
\[
\B G \da [\pt/ G]
,\]
where there is one object $\pt$ and $\Mor(\pt, \pt) = G$.
:::

:::{.example title="from representation stability"}
Define $\Finset$ to be the category of finite sets where the morphisms are set bijections.
Then $\Finset = \Disjoint_{n\in \ZZ_{\geq 0}} \B S_n$ for $S_n$ the symmetric group.
:::

:::{.definition title="Fiber products of groupoids"}
For $C, D' \to D$ morphisms of groupoids, we can construct their **fiber product** as the cartesian diagram:

\begin{tikzcd}
	\textcolor{rgb,255:red,92;green,92;blue,214}{C\fiberprod{D}D'} && {D'} \\
	\\
	C && D
	\arrow["f"', from=3-1, to=3-3]
	\arrow["{g}", from=1-3, to=3-3]
	\arrow["{\pr_1}"', from=1-1, to=3-1]
	\arrow["{\pr_2}", from=1-1, to=1-3]
\end{tikzcd}

> [Link to Diagram](https://q.uiver.app/?q=WzAsNCxbMCwyLCJDIl0sWzIsMiwiRCJdLFsyLDAsIkQnIl0sWzAsMCwiQ1xcZmliZXJwcm9ke0R9RCciLFsyNDAsNjAsNjAsMV1dLFswLDEsImYiLDJdLFsyLDEsImYnIl0sWzMsMCwiXFxwcl8xIiwyXSxbMywyLCJcXHByXzIiXV0=)

It can be constructed as the following category:

\[
\Ob(C\fiberprod{D} D') \da 
\left\{ 
\begin{array}{l}
(c, d', \alpha)
\end{array}
\middle\vert 
\begin{array}{l}
c\in C, d'\in D', \\ \\
\alpha: f(c) \mapsvia{\sim} g(d')
\end{array}
\right\}
\]

\includegraphics{figures/BigDiagram1.pdf}

<!--
\begin{tikzpicture}
\node {%
  \(\Mor((c_1, d_1', \alpha_1), (c_2, d_2', \alpha_2)) \da 
	\left\{
	\begin{aligned}
	c_1 \mapsvia{\beta} c_2 \\ \\
	d_1' \mapsvia{\gamma} d_2' 
	\end{aligned}
\,\,
	\middle\vert
\begin{tikzcd}
	{f(c_1)} && {f(c_2)} \\
	\\
	{g(d_1')} && {g(d_2')}
	\arrow["{f(\beta)}", from=1-1, to=1-3]
	\arrow["{g(\gamma)}"', from=3-1, to=3-3]
	\arrow["{\alpha_1}"', from=1-1, to=3-1]
	\arrow["{\alpha_2}", from=1-3, to=3-3]
\end{tikzcd}
	\right\}\)
};
\end{tikzpicture}
-->

:::

:::{.exercise title="Universal property of pullbacks in Groupoids"}
Describe the universal property of the pullback in the 2-category of groupoids.
:::

:::{.example title="$G$ is a pullback of $\B G$"}
$G$ regarded as a groupoid is the pullback over inclusions of points into $\B G$:

\begin{tikzcd}
	\textcolor{rgb,255:red,92;green,92;blue,214}{G} && \pt \\
	\\
	\pt && {\B G}
	\arrow[from=3-1, to=3-3]
	\arrow[color={rgb,255:red,92;green,92;blue,214}, from=1-1, to=3-1]
	\arrow[from=1-3, to=3-3]
	\arrow[color={rgb,255:red,92;green,92;blue,214}, from=1-1, to=1-3]
	\arrow["\lrcorner"{anchor=center, pos=0.125}, draw=none, from=1-1, to=3-3]
\end{tikzcd}

> [Link to Diagram](https://q.uiver.app/?q=WzAsNCxbMCwwLCJHIixbMjQwLDYwLDYwLDFdXSxbMiwwLCJcXHB0Il0sWzAsMiwiXFxwdCJdLFsyLDIsIlxcQiBHIl0sWzIsM10sWzAsMiwiIiwwLHsiY29sb3VyIjpbMjQwLDYwLDYwXX1dLFsxLDNdLFswLDEsIiIsMix7ImNvbG91ciI6WzI0MCw2MCw2MF19XSxbMCwzLCIiLDEseyJzdHlsZSI6eyJuYW1lIjoiY29ybmVyIn19XV0=)

:::

:::{.example title="Orbit/Stabilizer"}
Let $G\actson \Sigma$ and $x\in \Sigma$, and let $Gx$ be the orbit and $G_x$ be the stabilizer.
Then there is a morphism of groupoids $f \in \Mor(\B G_x, [\Sigma/G])$ inducing a pullback:

\begin{tikzcd}
	\textcolor{rgb,255:red,92;green,92;blue,214}{G_x} & {} & \Sigma \\
	\\
	{\B G_x} && {[\Sigma/G]} \\
	\pt && x
	\arrow["{\exists f}", from=3-1, to=3-3]
	\arrow[color={rgb,255:red,92;green,92;blue,214}, from=1-1, to=3-1]
	\arrow[from=1-3, to=3-3]
	\arrow[color={rgb,255:red,92;green,92;blue,214}, from=1-1, to=1-3]
	\arrow["\lrcorner"{anchor=center, pos=0.125}, color={rgb,255:red,92;green,92;blue,214}, draw=none, from=1-1, to=3-3]
	\arrow[maps to, from=4-1, to=4-3]
\end{tikzcd}

> [Link to Diagram](https://q.uiver.app/?q=WzAsNyxbMCwwLCJHX3giLFsyNDAsNjAsNjAsMV1dLFsxLDBdLFsyLDAsIlxcU2lnbWEiXSxbMCwyLCJcXEIgR194Il0sWzIsMiwiW1xcU2lnbWEvR10iXSxbMCwzLCJcXHB0Il0sWzIsMywieCJdLFszLDQsIlxcZXhpc3RzIGYiXSxbMCwzLCIiLDAseyJjb2xvdXIiOlsyNDAsNjAsNjBdfV0sWzIsNF0sWzAsMiwiIiwyLHsiY29sb3VyIjpbMjQwLDYwLDYwXX1dLFswLDQsIiIsMSx7ImNvbG91ciI6WzI0MCw2MCw2MF0sInN0eWxlIjp7Im5hbWUiOiJjb3JuZXIifX1dLFs1LDYsIiIsmfx7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6Im1hcHMgdG8ifX19XV0=)


:::

## Prestacks

:::{.remark}
Motivation: to specify a moduli functor, we'll need the data of

- Families over $S$,
- How to pull back families under morphisms, and
- *How* objects are isomorphic.

As a first attempt, we might try to define a 2-functor $F: \Sch \to \Grpd$ between 2-categories, where the latter is the category of groupoids.
For this, we need the following data:

- For all $S\in \Sch$, an assignment of a groupoid $F(S)$,
- For all morphisms $f\in \Mor_{\Sch}(S, T)$, an assignment of morphisms of groupoids 
\[
f^* \in \Mor_{\Grpd}(F(T), F(S))
.\]
- For compositions of morphisms of schemes $S \mapsvia{f} T \mapsvia{g} U$, an isomorphism of functors 
\[
\psi_{fg}: g^* \circ f^* \mapsvia{\sim} (g \circ f)^*
.\]
- Compatibility of these isomorphisms on chains of compositions $S \to T \to U \to V \to \cdots$. [^lasfunctors]

This is a lot of data to track, so instead we'll construct a large category $\mfx$ that encodes all of this, along with a fibration

\begin{tikzcd}
\mfx \da \Disjoint_{S\in \Sch} F(S) \ar[d, "p"] 
& (S, \alpha \in F(S)) \ar[d, maps to]
\\
\Sch & S
\end{tikzcd}

Here $S \in \Sch$ and $F(S) \in \Grpd$, so the "fibers" above $S$ are groupoids.

[^lasfunctors]: 
This leads to the notion of **lax** or **pseudofunctors**.

:::

:::{.definition title="Prestack"}
Let $p:\mfx \to \cat{C}$ be a functor between two 1-categories, so we have the following data:


\begin{tikzcd}
	\mfx && a && b & {\in \Ob(\mfx)} \\
	\\
	\cat{C} && S && T & {\in \Ob(\cat C)}
	\arrow["f", from=3-3, to=3-5]
	\arrow["p"', from=1-1, to=3-1]
	\arrow[maps to, from=1-3, to=3-3]
	\arrow[maps to, from=1-5, to=3-5]
	\arrow["\alpha", from=1-3, to=1-5]
\end{tikzcd}

> [Link to Diagram](https://q.uiver.app/?q=WzAsOCxbMCwwLCJcXG1meCJdLFswLDIsIlMiXSxbMiwwLCJhIl0sWzQsMCwiYiJdLFsyLDIsIlMiXSxbNCwyLCJUIl0sWzUsMCwiXFxpbiBcXE9iKFxcbWZ4KSJdLFs1LDIsIlxcaW4gXFxPYihTKSJdLFs0LDUsImYiXSxbMCwxLCJwIiwyXSxbMiw0LCIiLDAseyJzdHlsZSI6eyJ0YWlsIjp7Im5hbWUiOiJtYXBzIHRvIn19fV0sWzMsNSwiIiwyLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoibWFwcyB0byJ9fX1dLFsyLDNdXQ==)

Then $\mfx, p$ define a **prestack** over $\cat C$ iff

- Pullbacks exist: for $S \mapsvia{f} T$, there exists a (not necessarily unique) map $f^*b$, sometimes denoted $\ro{b}{f}$, yielding a cartesian square:

\begin{tikzcd}
	\textcolor{rgb,255:red,92;green,92;blue,214}{\exists a} && b \\
	\\
	S && T
	\arrow[from=3-1, to=3-3]
	\arrow[from=1-3, to=3-3]
	\arrow["{f^* b = \ro{b}{f}}", color={rgb,255:red,92;green,92;blue,214}, dashed, from=1-1, to=1-3]
	\arrow[color={rgb,255:red,92;green,92;blue,214}, dashed, from=1-1, to=3-1]
	\arrow["\lrcorner"{anchor=center, pos=0.125}, color={rgb,255:red,92;green,92;blue,214}, draw=none, from=1-1, to=3-3]
\end{tikzcd}

> [Link to Diagram](https://q.uiver.app/?q=WzAsNCxbMCwwLCJcXGV4aXN0cyBhIixbMjQwLDYwLDYwLDFdXSxbMiwwLCJiIl0sWzAsMiwiUyJdLFsyLDIsIlQiXSxbMiwzXSxbMSwzXSxbMCwxLCJmXiogYiA9IFxccm97Yn17Zn0iLDAseyJjb2xvdXIiOlsyNDAsNjAsNjBdLCJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJkYXNoZWQifX19LFsyNDAsNjAsNjAsMV1dLFswLDIsIiIsMCx7ImNvbG91ciI6WzI0MCw2MCw2MF0sInN0eWxlIjp7ImJvZHkiOnsibmFtZSI6ImRhc2hlZCJ9fX1dLFswLDMsIiIsMSx7ImNvbG91ciI6WzI0MCw2MCw2MF0sInN0eWxlIjp7Im5hbWUiOiJjb3JuZXIifX1dXQ==)

- A universal property making $\mfx$ a *fibered category*: every arrow in $\mfx$ is a pullback, so there are always lifts of the following form:

\begin{tikzcd}
	\textcolor{rgb,255:red,92;green,92;blue,214}{a} && b && c \\
	\\
	R && S && R
	\arrow[from=3-1, to=3-3]
	\arrow[from=3-3, to=3-5]
	\arrow[maps to, from=1-3, to=3-3]
	\arrow[maps to, from=1-5, to=3-5]
	\arrow[from=1-3, to=1-5]
	\arrow[color={rgb,255:red,92;green,92;blue,214}, dashed, maps to, from=1-1, to=3-1]
	\arrow["{\exists !}", color={rgb,255:red,92;green,92;blue,214}, dashed, from=1-1, to=1-3]
	\arrow["\lrcorner"{anchor=center, pos=0.125}, draw=none, from=1-1, to=3-3]
\end{tikzcd}

> [Link to Diagram](https://q.uiver.app/?q=WzAsNixbMCwwLCJhIixbMjQwLDYwLDYwLDFdXSxbMiwwLCJiIl0sWzQsMCwiYyJdLFswLDIsIlIiXSxbMiwyLCJTIl0sWzQsMiwiUiJdLFszLDRdLFs0LDVdLFsxLDQsIiIsmfx7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6Im1hcHMgdG8ifX19XSxbMiw1LCIiLDIseyJzdHlsZSI6eyJ0YWlsIjp7Im5hbWUiOiJtYXBzIHRvIn19fV0sWzEsMl0sWzAsMywiIiwwLHsiY29sb3VyIjpbMjQwLDYwLDYwXSwic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoibWFwcyB0byJ9LCJib2R5Ijp7Im5hbWUiOiJkYXNoZWQifX19XSxbMCwxLCJcXGV4aXN0cyAhIiwwLHsiY29sb3VyIjpbMjQwLDYwLDYwXSwic3R5bGUiOnsiYm9keSI6eyJuYW1lIjoiZGFzaGVkIn19fSxbMjQwLDYwLDYwLDFdXSxbMCw0LCIiLDAseyJzdHlsZSI6eyJuYW1lIjoiY29ybmVyIn19XV0=)

:::

:::{.slogan}
An alternative definition: a prestack is a category *fibered in groupoids*.
:::

:::{.warnings}
We often conflate $\mfx$ and the functor $\mfx \mapsvia{p} S$, and don't spell out the composition law in $\mfx$.
Moreover, we write $f^*b$ or $\ro{b}{f}$ for a *choice* of a pullback.
:::

:::{.definition title="Fiber Categories"}
For $p: \mfx\to \cat{C}$ a functor and $S\in \Ob(\cat C)$ any fixed object, the associated **fiber category over $S$**, denoted $\mfx(S)$, is the subcategory of $\mfx$ defined by:

- Objects: $a\in \Ob(\mfx)$ such that $a \mapsvia{p} S$, 
- Morphisms: $\Mor(a, a')$ are morphisms $f\in \Mor_{\mfx}(a, a')$ over $\id_S$:

\begin{tikzcd}
a 
  \ar[rd, ""]
  \ar[rr, "f"] 
& 
& 
a'
  \ar[ld, ""] 
\\
& 
S 
& 
\end{tikzcd}

:::

:::{.remark}
We can now equivalently define presheaves as categories fibered in sets.
:::

:::{.exercise title="Justifying 'category fibered in groupoids'"}
Show that if $\mfx \to \cat{C}$ is a prestack, then for all $S\in \cat{C}$, all maps in $\mfx(S)$ are invertible.
Conclude that the fiber categories $\mfx(S)$ are all groupoids.
:::

:::{.example title="Presheaves"}
Every presheaf forms a prestack.
Let $F \in \Presh(\Sch, \Set)$ be a presheaf of sets, and define $\mfx_F$ as the following category:

- Objects: Pairs $(S, a \in F(S))$ where $S\in \Sch$ and $F(s) \in \Set$.
- Morphisms: 
\[
\Mor( (S, a), (T, b) ) \da \ts{ S \mapsvia{f} T \st a = f^* b}
.\]

Note that we'll often conflate $F$ and $\mfx_F$.
This yields the fibration


\begin{tikzcd}
	{\mfx_F} && {(S, a)} \\
	\\
	\Sch && S
	\arrow[from=1-1, to=3-1, "p"]
	\arrow[maps to, from=1-3, to=3-3]
\end{tikzcd}

> [Link to Diagram](https://q.uiver.app/?q=WzAsNCxbMCwwLCJcXG1jeF9GIl0sWzAsMiwiXFxTY2giXSxbMiwwLCIoUywgYSkiXSxbMiwyLCJTIl0sWzAsMV0sWzIsMywiIiwwLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoibWFwcyB0byJ9fX1dXQ==)

:::

:::{.example title="Schemes"}
For $X\in \Sch$, take its Yoneda functor $h_X: \Sch \to \Set$.
Then define the category $\mfx_X$:

- Objects: Morphisms $S\to X$ of schemes.
- Morphisms: $\Mor(S\to X, T\to X)$ are morphisms over $X$:


\begin{tikzcd}
S 
  \ar[rd, ""]
  \ar[rr, ""] 
& 
& 
T
  \ar[ld, ""] 
\\
& 
X 
& 
\end{tikzcd}

This yields the fibration

\begin{tikzcd}
	{\mfx_X} && {(S\to X)} \\
	\\
	\Sch && S
	\arrow[from=1-1, to=3-1, "p"]
	\arrow[maps to, from=1-3, to=3-3]
\end{tikzcd}

> [Link to Diagram](https://q.uiver.app/?q=WzAsNCxbMCwwLCJcXG1jeF9GIl0sWzAsMiwiXFxTY2giXSxbMiwwLCIoUywgYSkiXSxbMiwyLCJTIl0sWzAsMV0sWzIsMywiIiwwLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoibWFwcyB0byJ9fX1dXQ==)

:::

:::{.example title="Moduli of curves"}
Define $\mg$ as the following category:

- Objects: families $\mcc\to S$ of smooth genus $g$ curves,
- Morphisms: $\Mor(\mcc \to S, \mcc'\to S')$: cartesian squares

\begin{tikzcd}
	\mcc && {\mcc'} \\
	\\
	S && S'
	\arrow[from=3-1, to=3-3]
	\arrow[from=1-1, to=3-1]
	\arrow[from=1-3, to=3-3]
	\arrow[from=1-1, to=1-3]
	\arrow["\lrcorner"{anchor=center, pos=0.125}, draw=none, from=1-1, to=3-3]
\end{tikzcd}

> [Link to Diagram](https://q.uiver.app/?q=WzAsNCxbMCwwLCJDIl0sWzAsMiwiUyJdLFsyLDIsIlMiXSxbMiwwLCJDJyJdLFsxLDIsIlxcaWRfUyIsMl0sWzAsMV0sWzMsMl0sWzAsM10sWzAsMiwiIiwxLHsic3R5bGUiOnsibmFtZSI6ImNvcm5lciJ9fV1d)

This yields a fibration

\begin{tikzcd}
	{\mg} && {(\mcc \to S)} \\
	\\
	\Sch && S
	\arrow[from=1-1, to=3-1]
	\arrow[maps to, from=1-3, to=3-3]
\end{tikzcd}

:::

:::{.example title="Bundles"}
For $C$ a smooth connected projective curve over $k$ a field, define $\Bun(C)$ as the following category:

- Objects: pairs $(S, F)$ where $F$ is a vector bundle over $C\times S$.
- Morphisms: 
\[
\Mor((S, F), (S', F'))
=
\left\{ 
\begin{array}{l}
  f\in \Mor_{\Sch}(S, S') \\
  \text{and a chosen isomorphism} \\
\alpha: (f\times \id)^* \circ F' \mapsvia{\sim} F
\end{array}
\right\}
.\]



:::{.remark}
A technical point: the choice of pushforward here is not necessarily canonical. 
However, as part of the data, one can take morphisms $F' \to (f\cross \id)_* \circ F$ such that the adjunction yields an isomorphism.
:::

:::

:::{.example title="Quotient prestack"}
Let $X\slice S\in \Grp\Sch$ where $G\actson X$.
Then define a category $[X/G]^\pre$:

- Objects: Morphisms over $\id_S$:

\begin{tikzcd}
T 
  \ar[rd, ""]
  \ar[rr, ""] 
& 
& 
X
  \ar[ld, ""] 
\\
& 
S 
& 
\end{tikzcd}

- Morphisms: 

\[
\Mor(T\to X, T'\to X)
\da 
\left\{ 
\begin{array}{l}
  T\to T'
\end{array}
\,\,
\middle\vert 
\begin{array}{l}
  (T \to T' \to X ) = g(T \to X) \\
  g\in G(T) \\
  G(T) \actson X(T)
\end{array}
\right\}
.\]

:::

:::{.remark}
A group scheme can alternatively be thought of as a functor with a factorization through $\Grp$.
:::

:::{.exercise title="Quotient prestacks and quotient groupoids"}
Show that for $T\in \Sch$, there is an equivalence
\[
[X/G]^\pre(T) \mapsvia{\sim} [X(T) / G(T)]
,\]
where the left-hand side is a fibered category over $T$ and the right-hand side is a quotient groupoid.

:::

### Morphisms of Prestacks

:::{.definition title="Morphisms of prestacks"}
A **morphism of prestacks** is a functor $\mfx \mapsvia{f} \mfx'$ such that there is a (strictly) commutative triangle

\begin{tikzcd}
	\mfx && \mfx' \\
	\\
	& \cat{C}
	\arrow["f", from=1-1, to=1-3]
	\arrow["{p_X}"', from=1-1, to=3-2]
	\arrow["{p_Y}", from=1-3, to=3-2]
\end{tikzcd}

> [Link to Diagram](https://q.uiver.app/?q=WzAsMyxbMCwwLCJcXG1jeCJdLFsyLDAsIlxcbWN5Il0sWzEsMiwiXFxTY2giXSxbMCwxLCJmIl0sWzAsMiwicF9YIiwyXSxbMSwyLCJwX1kiXV0=)

Here we require a strict equality $p_X(a) = p_Y(f(a))$ for any $a\in \mfx$

A **2-morphism** $\alpha$ between morphisms $f, g$ is a natural transformation: 

\begin{tikzcd}
	\mfx &&& \mfx'
	\arrow[""{name=0, anchor=center, inner sep=0}, "f", curve={height=-30pt}, from=1-1, to=1-4]
	\arrow[""{name=1, anchor=center, inner sep=0}, "g"', curve={height=30pt}, from=1-1, to=1-4]
	\arrow["\alpha", shorten <=8pt, shorten >=8pt, Rightarrow, from=0, to=1]
\end{tikzcd}

> [Link to Diagram](https://q.uiver.app/?q=WzAsMixbMCwwLCJcXG1meCJdLFszLDAsIlxcbWZ5Il0sWzAsMSwiZiIsMCx7ImN1cnZlIjotNX1dLFswLDEsImciLDIseyJjdXJ2ZSI6NX1dLFsyLDMsIlxcYWxwaGEiLDAseyJzaG9ydGVuIjp7InNvdXJjZSI6MjAsInRhcmdldCI6MjB9fV1d)

such that for all $a\in \mfx$, the following triangle $\alpha_a\in \Mor_{\mfx'}(f(a), g(a))$ is a morphisms over $\id_S$ for any $S\in \cat{C}$:

\begin{tikzcd}
f(a) 
  \ar[rd, ""]
  \ar[rr, ""] 
& 
& 
g(a)
  \ar[ld, ""] 
\\
& 
S 
& 
\end{tikzcd}

We define a category $\Mor(\mfx, \mfx')$ by:

- Objects: morphisms of prestacks.
- Morphisms: 2-morphisms of prestacks.

:::


:::{.exercise title="?"}
Show that $\Mor(\mfx, \mfx')$ is a groupoid.
:::

:::{.definition title="2-commutativity"}
A diagram is **2-commutative** iff there exists a 2-morphism $\alpha: g \circ f' \mapsvia{\sim} f\circ g'$ which is an isomorphism:

\begin{tikzcd}
	{\mfx \fiberprod{\mfx'} \mfx''} && {\mfx''} \\
	\\
	\mfx && \mfx'
	\arrow["g", from=1-3, to=3-3]
	\arrow["f"', from=3-1, to=3-3]
	\arrow["{g'}"', from=1-1, to=3-1]
	\arrow["{f'}", from=1-1, to=1-3]
	\arrow["\alpha", Rightarrow, from=3-1, to=1-3]
\end{tikzcd}

> [Link to Diagram](https://q.uiver.app/?q=WzAsNCxbMCwwLCJcXG1meCBcXGZpYmVycHJvZHtcXG1meX0gXFxtZnknIl0sWzIsMCwiXFxtZnknIl0sWzIsMiwiXFxtZnkiXSxbMCwyLCJcXG1meCJdLFsxLDIsImciXSxbMywyLCJmIiwyXSxbMCwzLCJnJyIsMl0sWzAsMSwiZiciXSxbMywxLCJcXGFscGhhIiwwLHsibGV2ZWwiOjJ9XV0=)

:::


:::{.definition title="Isomorphisms of prestacks"}
An **isomorphism** of prestacks is a 1-isomorphism of prestacks $f: \mfx \to \mfx'$ along with 2-isomorphisms $g\circ f \mapsvia{\sim} \id_{\mfx}$ and $f\circ g \mapsvia{\sim} \id_{\mfx'}$.
:::

:::{.exercise title="Isomorphisms of prestacks can be checked on fibers"}
Show that $\mfx \to \mfx'$ is an isomorphism iff $\mfx(S) \mapsvia{\sim} \mfx'(S)$ is an isomorphism on all fibers.
:::

:::{.proposition title="2-Yoneda"}
If $\mfx\in \prest {}\slice{\cat C}$ is a prestack over $\cat C$, then for any $S\in \Ob(\cat C)$, there is an equivalence of categories induced by the following functor:
\[
\Mor(S, \mfx) & \mapsvia{\sim}  \mfx(S) \\
f &\mapsto f_S(\id_S )
.\]

:::

:::{.remark}
For $S\in \Sch$, view $S$ as a prestack and consider a morphism $f:S\to \mfx$.
How is this specified?
For all $T\in \Sch$, the objects of $S\slice T$ are morphisms 
\[
f_T: \Mor(T, S) \to \mfx(T)
\]
and if $T=S$ this sends $\id_S$ to $f_S(\id_S)\in \mfx(S)$.

What is the inverse?
For $a\in \mfx(S)$ and for each $T \mapsvia{g} S$, **choose** a pullback $g^* a$.
Then define $f: S \to \mfx$ by
\[
f_T: \Mor(T, S) &\to \mfx(T) \\
g &\mapsto g^* a
.\]
:::

:::{.exercise title="?"}
Define what this equivalence should do on morphisms.
:::

:::{.remark}
Next time: fiber products of prestacks.
:::

