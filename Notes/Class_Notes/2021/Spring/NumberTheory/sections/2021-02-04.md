# Fundamental Theorem of Ideal Theory (Lec. 7, Thursday, February 04)

## Norms: Multiplicativity and Computations

:::{.remark}
Today: roughly chapter 6.
Goal: establish unique factorization of ideals for quadratic fields.
Let $K = \QQ(\sqrt d)$ be a quadratic field and we let 
\[
\tau = 
\begin{cases}
\sqrt d & d \equiv 2,3 \mod 4  
\\
{1 + \sqrt{d} \over 2} & d \equiv 1 \mod 4.
\end{cases}
\]
In this case we saw that $\ZZ_K = \ZZ + \ZZ \tau = \ZZ[\tau]$.
We defined the norm of a nonzero ideal $I\normal \ZZ_K$ by $N(I) = \abs{\ZZ_K/I}$. 
The main theorem was that $I \bar{I} = \gens{ N(I)}$, so the two definitions of norms are closely related.
Some corollaries of this theorem:


:::

:::{.corollary title="The norm is multiplicative"}
Let $I, J \normal \ZZ_K$ be nonzero, then $N(IJ) = N(I) N(J)$.
:::

:::{.proof title="of corollary"}
Note that $IJ \bar{IJ} = \gens{ N(IJ) }$ on one hand, and on the other hand we can write this as 
\[
IJ \bar I \bar J = I\bar I J \bar J = \gens{ N(I) } \gens{ N(J) } = \gens{ N(I) N(J) }
.\]
So we know that \( \gens{ N(IJ) } = \gens{ N(I) N(J) }   \) in $\ZZ_K$, how can we conclude that the generators are the same?
In a domain, they are the same up to a unit, so
\[
{ N(IJ) \over N(I) N(J) } \in U(\ZZ_K)
,\]
and thus this quotient is in $\ZZ_K \intersect\QQ = \ZZ$.
The same argument shows that its reciprocal is also in $\ZZ$, so the ratio must be a unit in $\ZZ$ and we have $N(IJ) = \pm N(I) N(J)$.
But the norm counts something, so both sides must be positive.
:::

:::{.remark}
Note that if we knew $I, J$ were comaximal, we could appeal to the Chinese Remainder Theorem, but we don't need any assumptions on the ideals for this proof.
:::

:::{.corollary title="Computing norms of principal ideals"}
Let \( \alpha\in \ZZ_K \smz \), then 
\[
N( \gens{ \alpha } ) = \abs{N(\alpha)}  = \abs{\alpha\bar \alpha} 
.\]

:::

:::{.proof title="of corollary"}
We have 
\[
\gens{ N( \gens{ \alpha }  )} 
\gens{ \alpha } \gens{ \bar \alpha } 
&=
\gens{ \alpha } \gens{ \bar \alpha } \\
&=
\gens{ \alpha\bar \alpha }\\
&= \gens{ N \alpha } 
.\]
By the same argument as the previous corollary, this can only be true if the generators are the same up to sign, so \( N( \gens{ \alpha }  = \pm N \alpha \). 

:::

## Unique Factorization for Ideals

:::{.lemma title="Principal Multiple Lemma"}
Let $I \normal \ZZ_K\smz$, then there is another ideal \( \tilde I \normal \ZZ_K\smz \) such that \( I \tilde I \) is principal.
:::

:::{.proof title="of Principal Multiple Lemma"}
Take $\tilde I \da \bar{I}$, since we proved that this is principal and generated by the norm.
:::

:::{.remark}
Why write this down when it's weaker than the previous theorem?
In the next proofs, we'll only really use that $I$ times something is principal.
:::

:::{.lemma title="Cancellation in the Monoid of Ideals"}
Suppose that $IJ = IJ'$ is an equation of nonzero ideals in $\ZZ_K$ with $I$ principal. 
Then $J = J'$, so principal ideals can be cancelled from both sides.
:::

:::{.definition title="Dilation of Ideals"}
If $I \normal \ZZ_K$, for any \( \alpha\in K \) define
\[
\alpha I \da \ts{ \alpha \beta \st \beta \in I } 
,\]
i.e. scale or dilate the ideal $I$ by the factor \( \alpha \).
We'll refer to this as the **dilation of $I$ by \( \alpha \)**.
:::

:::{.remark}
Is this still an ideal in $\ZZ_K$?
It still contains zero, is still closed under addition, and still absorbs multiplication by elements in $O_K$ -- however, it may not be a subset of $\ZZ_K$, since we can dilate by any element in $K$.
For example, for $I \da 2\ZZ$ take \( \alpha\da 1/5 \).
These are referred to as **fractional ideal**, i.e. a $\ZZ_K\dash$submodule of $K$.
It is an ideal in $\ZZ_K$ when it is contained in $\ZZ_K$.
:::

:::{.proof title="of cancellation in the monoid of ideals"}
Write \( I = \gens{ \alpha }  \).
Then \( \gens{ \alpha }J = \gens{ \alpha } J' \), however the RHS is equal to the dilated ideal \( \alpha J' \) and the LHS is \( \alpha J \).
So dilate both sides by $1/ \alpha$ to get $J = J'$.
:::

:::{.remark}
This was the easy case, when $I$ was principal.
What if $I$ is not principal?
:::

:::{.proposition title="The monoid $\Id(\ZZ_K)$ is Cancellative"}
If $IJ = IJ'$ then $J = J'$, with no assumptions on $I$.
:::

:::{.proof title="?"}
Choose $\tilde I$ using the previous lemma and multiply it to both sides to obtain
\[
(I \tilde I) J = (I \tilde I) J'
.\]
Then since $I\tilde I$ is principal, it can be cancelled using the previous lemma.
:::

### Proving Unique Factorization

:::{.theorem title="To divide is to contain"}
Let $I, J$ be nonzero ideals of $\ZZ_K$, then
\[
I \divides J \iff I \supseteq J
.\]

:::

:::{.proof title="of theorem"}
$\implies$:
This is true in any ring! 
If $I\divides J$, then $J = IM$ where $M \normal \ZZ_K$, and by definition $IM \subseteq I$ and so $J \subseteq I$.

\

$\impliedby$:
Suppose $I \supseteq J$, we then want to find $B \normal \ZZ_K$ with $J = IB$.
We'll proceed by pretending we had such a $B$ and seeing what it must be!
If $B$ satisfies this equation, pick $\tilde I$ where $I\tilde I = \gens{ \alpha}$, then
\[
\tilde I J = \tilde I I B = \gens{ \alpha }B = \alpha B 
.\]
From here we can solve for $B$ by dilating by $1/ \alpha$, so $B = \alpha ^{-1} (\tilde I J)$.
If we make this definition, does it work?

\

First, do we have \( B \subseteq \ZZ_K \)?
This amounts to check that $\tilde I H \subseteq \gens{ \alpha }$. 
This is true, using the assumption $J \subseteq I$, since $\tilde I J \subseteq \tilde I I = \gens{ \alpha }$. 
So $B$ is not a fractional ideal, and is an honest ideal of $\ZZ_K$.
We can also check that 
\[
IB 
&= I( \alpha ^{-1} \tilde I J) \\
& = \alpha\inv (I \tilde I J) \\
&= \alpha\inv ( \gens{ \alpha } J ) \\
&= \alpha ^{-1} ( \alpha J) \\
&= J
,\]
using that dilation commutes with ideal multiplication.

:::

:::{.remark}
We now want to prove that $\Id(\ZZ_K)$ is a UFM.
If it's cancellative, we just need to check factorization into irreducibles and that irreducibles are prime, i.e. the analog of Euclid's lemma.
:::

:::{.remark}
We'll use the fact that $\Id(\ZZ_K)$ is a *reduced* monoid, i.e. the only unit is the identity \( \gens{ 1 }  \), the entire ring.
This follows from the fact that the product of ideals is contained in both factors, so each factor would contain 1 and thus be the entire ring.
We'll proceed in two steps:
:::

:::{.proposition title="Unique Factorization"}
\envlist

1. Every element of $\Id(\ZZ_K)$ factors into irreducibles in $\Id(\ZZ_K)$, and

2. (Euclid's Lemma) Irreducibles in $\Id(\ZZ_K)$ are prime.
:::

:::{.remark}
We'll use the fact that it's reduced to avoid having to say "non-unit element" in (1), since we have only one unit and we'll think of it as the empty product.
\

How do you prove (1)?
The same way you prove it for the integers: suppose you have a smallest counterexample.
That can't be prime, since a product of 1 prime is an allowable factorization, so this factors into a product of two smaller things which necessarily can *not* be counterexamples by minimality.
So the smaller factors break up into primes -- but then so does their product, the original counterexample, contradiction.
The tricky part here is choosing what "smaller" should mean.

:::

:::{.proof title="of 1"}
If not, choose $I$ of smallest norm where $I$ has no such factorization.
Then $I \neq \gens{ 1 }$ since by convention this does factor as the product of zero irreducibles, and $I$ is not irreducible since irreducibles count as their own factorization.
So we can factor $I = AB$ with $A, B \neq \gens{ 1 }$.
Taking norms yields
\[
N(I) = N(AB) = N(A) N(B)
.\]
We'd like the norms of $A, B$ to be smaller, since then we could apply the inductive hypothesis.
The only obstruction to this would be if $N(A) = 1$ and $N(B) = N(I)$.
But having norm 1 means that $A = \gens{ 1 }$, since this means the quotient has one element, forcing it to be the zero ring.
So everything in the ring is zero mod the ideal, i.e. in the ideal.
So $1 < N(A), N(B) < N(I)$.
Since $I$ was the smallest counterexample, both $A$ and $B$ can be factored into irreducibles, but then concatenating the two factorizations yields a factorization for $AB$.
$\contradiction$

:::

:::{.proof title="of 2: Euclid's Lemma"}
Suppose $P$ is irreducible in $\Id(\ZZ_K)$ and suppose $P \divides IJ$, we want to show $P$ divides one of these two.
Suppose $P\notdivides I$, then $P$ does not contain $I$ and $P+I \supsetneq P$.
This means that $P+I$ is a *proper divisor* of $P$, i.e. it divides $P$ but is not equal to $P$.
But $P$ was irreducible, so $P+I$ is a unit, which forces $P + I = \gens{ 1 }$.
Multiplying by $J$ yields $PJ + IJ = J$.
We said that $P \divides IJ$ by assumption, so $IJ = PA$ for some nonzero ideal $A$.
So
\[
J 
&= PJ + IJ \\
&= PJ + PA \\ 
&= P(J + A)
,\]
which shows that $P\divides J$.
:::

:::{.remark}
Now running the exact same proof as for $\ZZ$ yields unique factorization.
:::

:::{.exercise title="?"}
Let $P$ be a nonzero ideal of $\Id(\ZZ_K)$, then $P$ is monoidally prime in $\Id(\ZZ_K)$ if and only if $P$ is prime in the usual sense of prime ideals.

> *Hint: use "to divide is to contain".*

:::

## Preview: Ramification

:::{.remark}
This chapter is about understanding prime ideals in quadratic number rings, i.e. $\ZZ_K$ for quadratic fields.
What are the building blocks of the nonzero prime ideals?

:::

:::{.definition title="Prime ideal above a prime number"}
Let $P$ be a nonzero prime ideal, then $P$ **lies above** the rational prime $p$ if and only if $P \supseteq \gens{ p }$. 
Equivalently, $p\in P$, or $P\divides \gens{ p }$.
:::

:::{.theorem title="Lying above unique primes"}
Every nonzero prime ideal of $\ZZ_K$ lies above a unique rational prime $p$.
:::

:::{.proof title="of theorem"}
Consider $P \intersect \ZZ \normal \ZZ$.
Tracing through the definitions, if $P$ is a prime ideal in $\ZZ_K$, then this intersection is also prime in $\ZZ$.
Moreover \( P \intersect Z \neq \ts{ 0 } \), since we can take any nonzero element \( \alpha \in P \), then \( 0\neq \alpha\bar \alpha \in \ZZ \) and since $P$ absorbs multiplication, this is still in $P$.
The nonzero prime ideals of $\ZZ$ are of the form $n\ZZ$ with $n$ prime, so $P \intersect\ZZ = p\ZZ$ for some prime $p$.
But then $p\in P$ and $P$ lies above $p$.
Why is this unique?
If $P$ lies above $q$, we would have $q\in P \intersect\ZZ = p \ZZ$ and thus $p\divides q$.
But since these are both primes, $p=q$.
:::

:::{.remark}
If we want to figure out all of the prime ideals $P$ of $\ZZ_K$, we should see how \( \gens{ p }  \) factors, since each $P$ shows up as a factor of some \( \gens{ p }  \).
Thus the major question will be: given $p$, how does \( \gens{ p }  \) factor into prime ideals in $\ZZ_K$?
:::

