---
title: "Reading Seminar: J-Holomorphic Curves, Section 3.3"
---



![](figures/2021-06-26_22-44-12.png)

# Goal: The Gromov-Witten Invariants

:::{.warnings}
These are extremely rough and imprecise notes taken for a reading seminar.
They're very likely full of mistakes and misunderstandings, so please use at your own risk.
:::


:::{.remark}
Our long-term goal: define the **Gromov-Witten** invariants of (say) a symplectic 4-manifold, i.e. a complex symplectic surface. 
These will be notated something like $\GW(M, A, g, n)$, where

- $(M, \omega, J)$ is a symplectic manifold with an almost-complex structure $J$,
- $A\in H_2(M; \ZZ)$ is a fixed homology class,
- $g,n$ denote the genus and number of marked points of a complex curve (Riemann surface) $\Sigma_{g, n}$ we're mapping into $M$.

The point of these invariants is to take some kind of enumerative count of rigid complex curves (*$J\dash$holomorphic curves*) embedded into $M$, up to some notion of isomorphism so that we can make this a finite count.
The $J\dash$holomorphic condition is essentially that these curves are in the kernel of some differential operator that generalizes the usual Cauchy-Riemann equations from 1-dimensional complex analysis.
The actual count will be the number of curves that are homologically equivalent to the fixed class $A$.

The rough program is to form some moduli space of curves, "rigidify" it enough to get it to be a finite-dimensional smooth manifold, and try to relate the curve count to the dimension of the moduli space.
We'll then relate that dimension to the analytic *index* of a Cauchy-Riemann operator $D$, and use a mix of analysis, topology, and algebraic geometry to compute this index (either by computing kernels/cokernels directly or relating them to other invariants like integrals, Chern classes, etc).
:::

> Note: I'll be writing $\Sym^n(X)$ everywhere for convenience, but I don't know if this is true on the nose -- in the older literature these maps are all defined to land in $M^{\times n}$ instead.




:::{.remark}
Fix $M, A, J, g, n$.
We'll define $\bar{\mcm}_{g, n}(A, J)$ to be the moduli space of embedded $J\dash$holomorphic curves $\Sigma \injectsvia{f} M$ with $[\Sigma] = [A]$ in $H_2(M; \ZZ)$ where $g(\Sigma) = g$ and $\tv{\elts{x}{n}} \in \Sym^n \Sigma$ is a collection of $n$ (distinct?) marked points. 
:::


:::{.remark}
There is a well-studied moduli space $\bar{\mcm}_{g, n}$, *the* moduli space of curves, which shows up in a thousand different guises with a thousand different names.
It is a very good space that a lot of people like.
We'll define it here to be the moduli space of **stable** embedded curves $\Sigma\injects M$ with $g(\Sigma) = g$ where again $\Sigma$ carries $n$ marked points.
The stability condition is something we'll cover later.


In full generality, $\bar{\mgn}$ is a smooth Deligne-Mumford stack -- i.e. a somewhat complicated algebro-geometric object.
One slogan that may be helpful: the category of schemes isn't closed under quotients, but schemes embed into stacks and stacks are closed under taking quotients.
So you might think of a stack as the quotient of a scheme by a non-free group action, where you might even take an algebraic group instead of just a Lie group or something.
A Deligne-Mumford stack will just be a stack that is stratified by quotient stacks.
:::


:::{.remark}
It may be helpful to think of $\bar{\mcm}_{g, n}$ as a complex *orbifold*.
As a first approximation, an *orbifold* is just a manifold with some exceptional collection of singular "orbifold points", which are the fixed points of some group action.
Here's the cartoon I usually have in mind:


![](figures/2021-06-26_17-57-58.png)

For genus $g = 0$, $\bar{\mcm}_{0, n}$ will be a smooth compact complex manifold of finite dimension, so we can run arguments from smooth/differential topology if we just map in $J\dash$holomorphic spheres.
:::


:::{.definition title="Gromov-Witten invariants, preliminary definition"}
There are two natural maps floating around:

\begin{tikzcd}
	{\bar{\mcm}_{g, n}(A, J)} \\
	\\
	{\bar{\mcm}_{g, n}} && {\Sym^n(X)}
	\arrow["\pi: {\text{Forget }A, J}"', from=1-1, to=3-1]
	\arrow["{\ev_1, \ev_2, \cdots, \ev_n}", from=1-1, to=3-3]
\end{tikzcd}

> [Link to Diagram](https://q.uiver.app/?q=WzAsMyxbMCwwLCJcXGJhcntcXG1jbX1fe2csIG59KEEsIEopIl0sWzAsMiwiXFxiYXJ7XFxtY219X3tnLCBufSJdLFsyLDIsIlxcU3ltXm4oWCkiXSxbMCwxLCJcXHRleHR7Rm9yZ2V0IH1BLCBKIiwyXSxbMCwyLCJcXGV2XzEsIFxcZXZfMiwgXFxjZG90cywgXFxldl9uIiwwLHsibGV2ZWwiOjN9XV0=)

The evaluation maps $\ev_j$ are coming from the fact that every point in the moduli space upstairs carries the data of an embedding $f: \Sigma_{g, n} \embeds M$, and if $x_i$ is a marked point we can just push it forward and look at $f(x_i) \subseteq M$.
So morally speaking, the GW invariants will be defined as 
\[
\GW(M, A, g, n):
H^*(M; \QQ)^{\tensor_\QQ n} \tensor_\QQ H^*(\bmgn; \QQ) &\to \QQ \\
(\elts{\alpha}{n}) \tensor \beta &\mapsto \int_{\bmgn(A, J)} \prod_{j=1}^n \ev_j^*(\alpha_j) \cupprod \pi^*(\beta^\PD)
,\]
where here the product denotes the $n\dash$fold cup product in (say, singular) cohomology.
:::


:::{.remark}
The output will be the number of embedded $J\dash$holomorphic curves $\Sigma$

- Where $g(\Sigma) = g$
- With $n$ marked points $x_i$
- Where $x_i$ intersects a cycle $X_i \subseteq H_2(M; \QQ)$
- Where $X_i$ is dual to $\alpha_i$
- Where $[\pi(\Sigma)] = [\beta] \in H_2(\bmgn)$.

So roughly the number of curves representing the homology class $\beta$, and we get it by "integrating over the moduli space" in the sense of capping against a fundamental class.
:::


:::{.warnings}
This description is partially a cartoon!
It will work in certain special cases, but $\bmgn$ doesn't have an honest fundamental class in general to integrate against.
Some hard work of e.g. Fantechi constructs a "virtual fundamental class" that (I think) more faithfully captures this idea.
:::


:::{.example title="Uses"}
GW invariants can be used to get at classical enumerative problems.
For example, we can compute the number of lines in $\PP^3(\CC)$ intersecting 4 generic lines as 
\[
\GW_{L, 4}^{\PP^3}(c^2, c^2, c^2, c^2) = 2
.\]
:::


:::{.remark}
The GW invariants will only depend on the **deformation type** of $(M, \omega)$.
In particular, we'll be able to take 1-parameter families of symplectic manifolds constructed by cooking up paths
\[
\gamma: I&\to \Omega^2(M) \\
t &\mapsto \omega_t
,\]
all of which will have the same GW invariants, provided we start with *semipositive* symplectic manifolds and choose these paths carefully.
Morally, this is moving the manifolds $(M, \omega)$ around in the moduli space, just in a controlled way (along semipositive families) as opposed to just wiggling in an $\eps$ ball in $\bmgn(A, J)$.
:::


:::{.remark}
A remarkable (and hard?) theorem is that in real dimension 4, the GW invariants only depend on the *diffeomorphism type* of the manifold, and can detect non-diffeomorphic smooth manifolds.
They are also equal to the Seiberg-Witten invariants in this dimension.
This is not a general phenomenon though -- there are counterexamples in dimension 6 where neither of these statements hold.
:::


:::{.remark}
The later chapters of the book discuss some applications to other topics.
I'll just relay the words here, in case anything is meaningful to you all, since I don't know much about them yet myself:

- For $g=0$, GW is related to quantum cohomology and Frobenius manifolds.
  There is some theorem about proving the associativity in quantum cohomology.
- There is *some* way to produce a TQFT in this setting as well, and lots of people like these.
- Mirror symmetry is supposed to give a 2nd way to compute these invariants.
  I think the symplectic side covered here corresponds to the "A side", and conjecturally there is a "B side" mirror with the same GW invariants.
  The book is a little old now, so I don't know how conjectural this still is.
:::

# Ch. 3: Moduli Spaces and Transversality


:::{.remark}
Our goal for this chapter: show that for a general $J$, the moduli space $\mcm^*(A, \Sigma, J)$ is a smooth complex manifold of finite dimension.
The asterisk here corresponds to taking only *simple curves* -- this doesn't seem to be a necessary condition, but is meant to make transversality arguments simpler.
Here's a rough outline of the sections:

- 3.1: Defines the moduli space of simple curves
- 3.2: Discusses Thom-Smale transversality, and shows that $\mcm^*$ is a smooth manifold when the (linearized) Cauchy-Riemann operator $D$ is surjective for all $J\dash$holomorphic curves.
- 3.3 (today): Discusses examples of **regularity** in dimension 4, along with some sufficient conditions to determine if your favorite almost complex structure $J$ is sufficiently regular.
  The usual proofs lean on things like the Sard-Smale theorem, but here we'll use some AG techniques like the Riemann-Roch theorem to check these conditions.

- 3.4: Discusses moduli spaces with pointwise constraints.
:::


:::{.remark}
Some structures to recall from Han's talks:

- $(M, \omega, J)$ will be a $2n\dash$dimensional symplectic manifold, with $\omega \in\Omega^2(M)$ a symplectic form, $J$ an $\omega\dash$tame almost-complex structure on $M$, so $J\in \Endo(TM)$ with $J^2 = -\id$.
- $(\Sigma, j_\Sigma, \dV)$ will be a Riemann surface with an almost-complex structure and $\dV$ its volume form.
  Note that in dimension 2, all almost-complex structures are *integrable* in the sense that they come from an honest complex structure, so we'll always think of $j_\Sigma$ as an actual complex structure.
  - The Cauchy-Riemann operator $\delbar_J \approx {1\over 2}\qty{Jd - d j_\sigma}$, where I'm being **very** loose with this definition!
  Just recall that (exercise) the usual Cauchy-Riemann equations can be generalized by $dJ -Jd = 0$ where $J$ is the standard complex structure on $\CC^n$, and here we just allow the two complex structures to vary in the domain/codomain.
  - Also $\ker \delbar_J$ are precisely the $J\dash$holomorphic curves, so solutions to this generalized Cauchy-Riemann equation.

- $u\in C^\infty(\Sigma, M)$ will be a smooth map representing a solution.
  Note that we wanted Sobolev completions to some $W^{k, p}$ in order to apply PDE theory to $u$.
  In particular, we'll want the linearized $\delbar_J$ to be a Fredholm operator so that it has a well-defined index 
  \[
\ind(D) \da \dim_\RR \ker(D) - \dim_\RR \coker(D)
  .\]
  These are supposed to be like "operators that are invertible up to finite-dimensional noise", and such operators (and their indices) are stable under small perturbations.

- $\mcm^*(A, \Sigma, J)$ will be $u\in C^\infty(\Sigma, M) \intersect \ker \delbar_J$ with $[u(\Sigma)] = A\in H_2(M; \ZZ)$ and $u$ a **simple** curve.
  - Simple curves are defined by the following condition: a curve $u:\Sigma\to M$ is *not simple* iff there exists a branched cover $\tilde\Sigma\to \Sigma$ of degree $d\geq 2$ and an embedding $\tilde u: \tilde \Sigma\to M$ making the following diagram commute:

\begin{tikzcd}
	{\tilde \Sigma} \\
	\\
	\Sigma && M && {}
	\arrow["u", from=3-1, to=3-3]
	\arrow["{\tilde u}", from=1-1, to=3-3]
	\arrow["{\substack{\text{branched} \\\deg d\geq 2}}"', from=1-1, to=3-1]
\end{tikzcd}

  > [Link to Diagram](https://q.uiver.app/?q=WzAsNCxbMiwyLCJNIl0sWzQsMl0sWzAsMiwiXFxTaWdtYSJdLFswLDAsIlxcdGlsZGUgXFxTaWdtYSJdLFsyLDAsInUiXSxbMywwLCJcXHRpbGRlIHUiXSxbMywyLCJcXHN1YnN0YWNre1xcdGV4dHticmFuY2hlZH0gXFxcXFxcZGVnIGRcXGdlcSAyfSIsMl1d)

  This is the condition that $\Sigma$ doesn't factor through a ramified curve, here's a cartoon for a non-simple curve where $d=2$:

  ![](figures/2021-06-26_18-57-43.png)

  Here they both have the same image, so represent the same embedded curve, but $\tilde \Sigma$ has a branch point over $\Sigma$ near the center.
  Non-simple curves will correspond to orbifold points in $\mcm(A, \Sigma, J)$, and the theorem is that simple curves are generic in this moduli space.

- We've pulled back the tangent bundle of $M$ in the following way:

\begin{tikzcd}
	{u^* TM} && TM \\
	\\
	\Sigma && M
	\arrow[from=3-1, to=3-3]
	\arrow[from=1-3, to=3-3]
	\arrow[dashed, from=1-1, to=3-1]
	\arrow[dashed, from=1-1, to=1-3]
	\arrow["\lrcorner"{anchor=center, pos=0.125}, draw=none, from=1-1, to=3-3]
\end{tikzcd}

> [Link to Diagram](https://q.uiver.app/?q=WzAsNCxbMiwyLCJNIl0sWzAsMiwiXFxTaWdtYSJdLFsyLDAsIlRNIl0sWzAsMCwidV4qIFRNIl0sWzEsMF0sWzIsMF0sWzMsMSwiIiwwLHsic3R5bGUiOnsiYm9keSI6eyJuYW1lIjoiZGFzaGVkIn19fV0sWzMsMiwiIiwyLHsic3R5bGUiOnsiYm9keSI6eyJuYW1lIjoiZGFzaGVkIn19fV0sWzMsMCwiIiwxLHsic3R5bGUiOnsibmFtZSI6ImNvcm5lciJ9fV1d)

- We've constructed a bundle with a global section?

\begin{tikzcd}
	{\mathcal{E}_u \da \Omega^{0, 1}(\Sigma, u^* TM)} && {\mathcal{E}} \\
	\\
	&& {B \da \ts{u\in C^\infty(\Sigma, M) \st [u(\Sigma)] = A}}
	\arrow[from=1-1, to=1-3]
	\arrow[from=1-3, to=3-3]
	\arrow["{s(u)\da (u, \delbar_J(u))}"', curve={height=30pt}, dashed, from=3-3, to=1-3]
\end{tikzcd}

> [Link to Diagram](https://q.uiver.app/?q=WzAsMyxbMCwwLCJcXG1hdGhjYWx7RX1fdSBcXGRhIFxcT21lZ2FeezAsIDF9KFxcU2lnbWEsIHVeKiBUTSkiXSxbMiwwLCJcXG1hdGhjYWx7RX0iXSxbMiwyLCJCIFxcZGEgXFx0c3t1XFxpbiBDXlxcaW5mdHkoXFxTaWdtYSwgTSkgXFxzdCBbdShcXFNpZ21hKV0gPSBBfSJdLFswLDFdLFsxLDJdLFsyLDEsInModSlcXGRhICh1LCBcXGRlbGJhcl9KKHUpKSIsMix7ImN1cnZlIjo1LCJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJkYXNoZWQifX19XV0=)



  Our moduli space $\mcm(A, \Sigma, J)$ will be the zero section of this bundle, and we'll obtain $\mcm^*$ by intersecting the base space with the solutions $u$ that are **somewhere injective**.
  It seems like we'll somehow need to perturb sections to get them to be transverse to the zero section:

  ![](figures/2021-06-26_19-04-34.png)

- Given $\mce \to B$, we've taken tangent spaces of everything and cooked up a map $D_u: TB\to \mce_u$:

\begin{tikzcd}
	\textcolor{rgb,255:red,92;green,92;blue,214}{T_{(u, 0)}\mce} && \textcolor{rgb,255:red,92;green,92;blue,214}{T_uB \oplus \mce_u} \\
	\\
	TB & {T_u B} && \textcolor{rgb,255:red,92;green,92;blue,214}{\mce_u}
	\arrow[from=1-1, to=3-1]
	\arrow["ds", color={rgb,255:red,92;green,92;blue,214}, curve={height=-30pt}, dashed, from=3-1, to=1-1]
	\arrow["{\pi_2}", color={rgb,255:red,92;green,92;blue,214}, dotted, from=1-3, to=3-4]
	\arrow["{\pi_1}"', dotted, from=1-3, to=3-2]
	\arrow[color={rgb,255:red,92;green,92;blue,214}, Rightarrow, no head, from=1-1, to=1-3]
	\arrow["{\da D_u}"', curve={height=30pt}, squiggly, from=3-1, to=3-4]
\end{tikzcd}

> [Link to Diagram](https://q.uiver.app/?q=WzAsNSxbMCwwLCJUX3sodSwgMCl9XFxtY2UiLFsyNDAsNjAsNjAsMV1dLFswLDIsIlRCIl0sWzIsMCwiVF91QiBcXG9wbHVzIFxcbWNlX3UiLFsyNDAsNjAsNjAsMV1dLFszLDIsIlxcbWNlX3UiLFsyNDAsNjAsNjAsMV1dLFsxLDIsIlRfdSBCIl0sWzAsMV0sWzEsMCwiZHMiLDAseyJjdXJ2ZSI6LTUsImNvbG91ciI6WzI0MCw2MCw2MF0sInN0eWxlIjp7ImJvZHkiOnsibmFtZSI6ImRhc2hlZCJ9fX0sWzI0MCw2MCw2MCwxXV0sWzIsMywiXFxwaV8yIiwwLHsiY29sb3VyIjpbMjQwLDYwLDYwXSwic3R5bGUiOnsiYm9keSI6eyJuYW1lIjoiZG90dGVkIn19fSxbMjQwLDYwLDYwLDFdXSxbMiw0LCJcXHBpXzEiLDIseyJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJkb3R0ZWQifX19XSxbMCwyLCIiLDEseyJsZXZlbCI6MiwiY29sb3VyIjpbMjQwLDYwLDYwXSwic3R5bGUiOnsiaGVhZCI6eyJuYW1lIjoibm9uZSJ9fX1dLFsxLDMsIlxcZGEgRF91IiwyLHsiY3VydmUiOjUsInN0eWxlIjp7ImJvZHkiOnsibmFtZSI6InNxdWlnZ2x5In19fV1d)

  This could be identified as a map
  \[
  D_u: \Omega^0(\Sigma; u^* TM) \to \Omega^{0, 1}(\Sigma, u^* TM)
  .\]

- By Riemann-Roch, we identified
\[
\Ind(D_u) = n(2-2g(\Sigma)) + 2c_1(u^* TM)
,\]
  which roughly comes from taking the Euler characteristic of Dolbeault cohomology $H^*_{\delbar}(u^* TM)$, which ultimately came from the differential on global sections
  \[
  \delbar: \Gamma (\Omega^{p, q}) \mapsvia{\delbar} \Gamma(\Omega^{p, q+1})
  .\]

- We wanted to allow varying the almost-complex structure $J$, so we defined $\mcj^\ell$ be all $J\in C^\ell(TM, TM)$ which were $\ell$ times continuously differentiable, where we equip this space with the smooth topology.

- We enlarged the moduli space to a *universal moduli space* $\mcm^*(A, \Sigma, \mcj^\ell)$ which fibers over $\mcj^\ell$:
\begin{tikzcd}
	{\mcm^*(A, \Sigma, \mcj^\ell)} \\
	\\
	{\mcj^\ell}
	\arrow["\pi", from=1-1, to=3-1]
\end{tikzcd}

> [Link to Diagram](https://q.uiver.app/?q=WzAsMixbMCwwLCJcXG1jbV4qKEEsIFxcU2lnbWEsIFxcbWNqXlxcZWxsKSJdLFswLDIsIlxcbWNqXlxcZWxsIl0sWzAsMSwiXFxwaSJdXQ==)

- The upshot was that $\pi\inv(J) = \mcm^*(A, \Sigma, J)$ is our original moduli space, and we can apply the implicit function theorem for (infinite-dimensional) Banach manifolds to conclude this is a finite-dimensional submanifold.

- Somehow we also show that $T_{(u, 0)} \mcm^*(A, \Sigma, J) = \ker D_u$.

- We also use the Sard-Smale theorem to show that in $\mcj^\ell$, the regular values of $\pi\inv$ are Baire 2nd category (a countable intersection of open dense sets), so "generic" in an appropriate sense.
  - Useful example: $\QQ\subset \RR$ is 1st category but the irrationals are 2nd category.
:::

## 3.3: Regularity


:::{.definition title="Regular"}
In light of the previous discussion, we'll say that $J$ is **regular** for $A$ iff $D_u$ is surjective for all $u\in \mcm^*(A, \Sigma, J)$ where the $J$ is fixed.
A point $p \da (u, J) \in \mcm^*$ will be a **regular point** iff $T_p \mcm^* \surjectsvia{d\pi_p} T_{\pi(p)} \mcj$ is surjective, where now we let $J$ vary in $\mcj$.
:::


:::{.remark}
Recall that $\mcj$ is the space of all almost-complex structures on $M$.
A consequence of regularity is that any smooth one-parameter family $[0, 1]\to \mcj$ can be $\eps\dash$lifted in the sense that there is a commutative diagram

\begin{tikzcd}
	&& {\mcm^*(A, \Sigma,\mcj)} \\
	\\
	{[0, \eps]} && \mcj \\
	{\substack{0 \\ \\ t }} && {\substack{J \\ \\ J_t }}
	\arrow["\pi", from=1-3, to=3-3]
	\arrow["\gamma"', from=3-1, to=3-3]
	\arrow["{\exists \tilde\gamma}", dashed, from=3-1, to=1-3]
	\arrow[maps to, from=4-1, to=4-3]
\end{tikzcd}

> [Link to Diagram](https://q.uiver.app/?q=WzAsNSxbMCwyLCJbMCwgXFxlcHNdIl0sWzIsMiwiXFxtY2oiXSxbMiwwLCJcXG1jbV4qKEEsIFxcU2lnbWEsXFxtY2opIl0sWzAsMywiXFxzdWJzdGFja3swIFxcXFwgXFxcXCB0IH0iXSxbMiwzLCJcXHN1YnN0YWNre0ogXFxcXCBcXFxcIEpfdCB9Il0sWzIsMSwiXFxwaSJdLFswLDEsIlxcZ2FtbWEiLDJdLFswLDIsIlxcZXhpc3RzIFxcdGlsZGVcXGdhbW1hIiwwLHsic3R5bGUiOnsiYm9keSI6eyJuYW1lIjoiZGFzaGVkIn19fV0sWzMsNCwiIiwwLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoibWFwcyB0byJ9fX1dXQ==)

> Note: here I just mean $\gamma(0) = J$ and $\gamma(t) \da J_t$.

Moreover if $(u, J)$ is regular, then the lifts $(u, J_t)$ along the path upstairs will still be regular nearby:

![](figures/2021-06-26_19-28-31.png)

So although we can't freely perturb regular values in the moduli space, we can take one-parameter families $J_t$ in $\mcj$ as "controlled deformations" of almost-complex structures and lift them to controlled deformations upstairs.
:::


:::{.warnings}
If the point $(u, J)$ is *not* regular, then there may not be any nearby regular points in the universal moduli space $\mcm^*(A, \Sigma, \mcj)$.
:::

## Overview of Main Theorems


:::{.remark}
The two main theorems of this section describe sufficient conditions for regularity and how to produce a regular almost-complex structure.
:::


:::{.theorem title="3.3.4"}
Let $g(\Sigma) = 0$ and $\dim_\RR M = 4$, and consider the $J\dash$holomorphically embedded sphere $(\Sigma, j_\Sigma) \embeds (M^4, J)$.
Letting $p\da \Sigma^2 \da \Sigma \cdot \Sigma$ be the self-intersection number of $\Sigma$, then $J$ is regular for $A \da [\Sigma]$ if and only if $p\geq -1$.
:::


:::{.theorem title="3.3.5"}
Let $\tilde A \da [S^2 \cross \pt]$ as a class in $H_2(\tilde M; \ZZ)$ where $\tilde M \da S^2 \cross M$.
Then for all $J \in \mcj(M, \omega)$, the almost-complex structure $\tilde J \da i\cross J$ is regular for $\tilde A$, where $i$ is the standard complex structure on $S^2$.
:::


:::{.remark}
The following is a summary of the other lemmas in this chapter, which are useful on their own but also used to prove the above two theorems.

- 3.3.1: If $J$ is integrable and $\CP^1 \mapsvia{u} M$, then $u^* TM = \oplus L_k$ decomposes as a sum of line bundles and $J$ is regular iff $c_1(L_k) \geq -1$ for all $k$, where $c_1$ denotes the Chern number.

- 3.3.2: If $\mce \to \CP^1$ is *any* bundle, not just $u^* TM$, and there exists a decomposition $\mce = \oplus L_k$ into line bundles, and if $D: \Omega^0(\CP^1; \mce) \to \Omega^{0, 1}(\CP^1; \mce)$ is any $\RR\dash$linear Cauchy-Riemann operator that preserves the decomposition in the sense that $D(L_k ) \subseteq L_k$ for all $k$, then $D_u$ is surjective iff $c_1(L_k) \geq -1$ for all $k$.

- 3.3.3: If $(M, \omega, J)$ is any 4-dimensional symplectic manifold and $J$ is any almost-complex structure (not necessarily integrable) and $u: \CP^1 \to M$ is an *immersed* $J\dash$holomorphic sphere, then $D_u$ is surjective if $c_1(u^* TM) \geq 1$.

The rest of the section involves examples and constructions.
:::

# 3.3: Regularity Calculations


:::{.remark}
Fix $\Sigma \da \CP^1$, which is homeomorphic to $S^2$.
For notation, we'll write $c_1(L) \da \inner{c_1(L)}{[\Sigma]}$ for $L$ a line bundle. where we're using the intersection pairing
\[
\inner{\wait}{\wait}: H^2(M; \QQ) \tensor_\QQ H_2(M; \QQ)\to \QQ
.\]
:::


:::{.theorem title="Splitting Principle (Grothendieck)"}
Every complex holomorphic line bundle of rank $r$ over $\CP_1$ decomposes uniquely into a direct sum of line bundles:

\begin{tikzcd}
	{\CC^r} && \mce &&& {\CC^r} && {\bigoplus_{k=1}^\ell \OO_{\CP^1}(n_k)} \\
	\\
	&& {\CP^1} &&&&& {\CP^1}
	\arrow[from=1-1, to=1-3]
	\arrow[""{name=0, anchor=center, inner sep=0}, from=1-3, to=3-3]
	\arrow[from=1-6, to=1-8]
	\arrow[""{name=1, anchor=center, inner sep=0}, from=1-8, to=3-8]
\end{tikzcd}

>[Link to Diagram](https://q.uiver.app/?q=WzAsNixbMCwwLCJcXENDXnIiXSxbMiwwLCJcXG1jZSJdLFsyLDIsIlxcQ1BeMSJdLFs3LDIsIlxcQ1BeMSJdLFs1LDAsIlxcQ0NeciJdLFs3LDAsIlxcYmlnb3BsdXNfe2s9MX1eXFxlbGwgXFxPT197XFxDUF4xfShuX2spIl0sWzAsMV0sWzEsMl0sWzQsNV0sWzUsM10sWzcsOSwiIiwwLHsic2hvcnRlbiI6eyJzb3VyY2UiOjEwLCJ0YXJnZXQiOjMwfSwic3R5bGUiOnsiYm9keSI6eyJuYW1lIjoic3F1aWdnbHkifX19XV0=)

These bundles are holomorphically isomorphic.
:::


:::{.remark}
AG break:
$\OO_X(a_k)$ needs some explanation!
If $\OO_X$ is the structure sheaf (so regular functions), then $\OO(n) \da \OO(1)^{\tensor n}$, and $\OO(1)$ will be the **Serre twisting sheaf**, sometimes referred to as the **hyperplane bundle**.
To describe this, note that we first have a tautological bundle over the Grassmannian over $\CC^n$ where the fiber over a point (corresponding to a subspace $V$) is $V$ itself regarded as a subset of $\CC^k \subseteq \CC^n$.


\begin{tikzcd}
	{F_{[W]} \da W \subset \CC^k } && {\gamma\da\ts{([W], W)} \subset \Gr_k(\CC^{n}) \times \CC^{k}} \\
	\\
	&& {[W] \in \Gr_k(\CC^{n})}
	\arrow[from=1-3, to=3-3]
	\arrow[from=1-1, to=1-3]
\end{tikzcd}

[Link to Diagram](https://q.uiver.app/?q=WzAsMyxbMiwwLCJcXGdhbW1hXFxkYVxcdHN7KFtXXSwgVyl9IFxcc3Vic2V0IFxcR3JfayhcXENDXntufSkgXFx0aW1lcyBcXENDXntufSJdLFsyLDIsIltXXSBcXGluIFxcR3JfayhcXENDXntufSkiXSxbMCwwLCJGX3tbV119IFxcZGEgVyBcXHN1YnNldCBWIl0sWzAsMV0sWzIsMF1d)

Taking $k=1$, we can identify $\CP^n \da \Gr_1(\CC^{n+1})$ as the space of lines in $\CC^{n+1}$ to get the **tautological line bundle** which defines $\OO(-1)$:

\begin{tikzcd}
	\CC && {\gamma \da \OO_{\PP^n}(-1)} \\
	\\
	&& {\CP^n}
	\arrow[from=1-3, to=3-3]
	\arrow[from=1-1, to=1-3]
\end{tikzcd}

> [Link to Diagram](https://q.uiver.app/?q=WzAsMyxbMiwwLCJcXGdhbW1hIFxcZGEgXFxPT197XFxQUF5ufSgtMSkiXSxbMiwyLCJcXENQXm4iXSxbMCwwLCJcXENDIl0sWzAsMV0sWzIsMF1d)

Note that the fiber above a line is just the line itself.
This lets us get $\OO(-k)$ for any $k$; to get positive numbers just define $\OO(1) \da \OO(-1)\dual$ as the dual bundle, where you replace each fiber $F$ with its dual space $F\dual \da \Hom(F, \CC)$ as a vector space.


:::


:::{.remark}
Upshot: these are relatively simple building blocks, just tensor powers and duals of an object where nothing too mysterious is going on.
Moreover, for us, $u^* TM = L_1 \oplus L_2$ breaks up as *some* sum of line bundles -- it doesn't actually matter which twists they are for our purposes.
:::

## Lemma 3.3.1


:::{.lemma title="3.3.1"}
If $u^* TM \cong \oplus_{k=1}^\ell L_k$ and 
$c_1(L_k) \geq 1$ for every $k$, then $D_u$ is surjective.
:::


:::{.remark}
To prove this, we'll need an analytic version of Riemann-Roch:
:::


:::{.theorem title="Riemann-Roch, Append C.1.10, Part 3"}
If $\mce\to \Sigma$ is a holomorphic bundle and $F\leq \mce$ is a sub-bundle, then $D_u$ is surjective iff 
\[
\mu(\mce, F) + 2\chi(\Sigma) > 0
,\]
where $\mu(\wait, \wait)$ is a **relative Maslov index**.
Moreover, taking $F = \emptyset$, if $\bd \Sigma = \emptyset$ then there is a formula
\[
\mu(\mce) \da \mu(\mce, \emptyset) = 2 \inner{c_1(\mce)}{ [\Sigma] }
.\]
:::


## Proof using Riemann-Roch

:::{.proof title="of Lemma, using Riemann-Roch"}
We'll first need that since $\Sigma$ is a sphere, we know its cohomology ring:
\[
H^*(S^2; \ZZ) \cong \ZZ[x]/ \gens{x^2} && \text{where } \abs{x} = 2
,\]
which is only supported in degrees $d=0, 2$. 
So
\[
\chi(\Sigma) = 1 - 0 + 1 = 2
.\]

> Note that you could also just check this cellularly: $S^2$ has a CW complex structure with one 0-cell and one 2-cell, and you can compute $\chi$ using just the ranks of cellular chain groups instead of homology.

Strategy: take the LHS appearing in the RR formula above, we'll try to show it's positive.
\[
\mu(u^* TM) + 2\chi(\Sigma) 
&= \mu(u^* TM) + 4 \\
&= \mu\qty{ \bigoplus_{k=1}^\ell L_k } + 4 \\
&= \sum_{k=1}^\ell \mu\qty{ L_k } + 4 \\
&= \sum_{k=1}^\ell 2c_1(L_k) + 4
,\]
and thus
\[
2\sum_{k=1}^\ell c_1(L_k) + 4 & > 0 \\
\iff \sum_{k=1}^\ell c_1(L_k) & > -2
.\]
Since the rank of $u^* TM$ is at least 2, there are at least 2 summands.
So if every $c_1(L_k) > -1$, this inequality holds, and that is sufficient for $D_u$ to be surjective.
:::

## Proof using AG/Chern Classes

:::{.proof title="of lemma, using complex analytic arguments"}
Since $J$ is assumed integrable, $D_u = \delbar_J$ coincides with the Dolbeault derivative determined by the complex structure on $M$, and $D_u$ respects the splitting $u^* TM \cong \bigoplus L_k$.
We want to show $D_u$ is surjective, so it thus suffices to show $\coker \delbar_J = 0$, where it's worth recalling a nice identification:
\[
\coker\qty{A \mapsvia{f} B} \cong B/\im A
.\]
The actual definition is taking a pushout against the terminal object in your category:

\begin{tikzcd}
	A && 1 \\
	\\
	B && {\coker f \da B \disjoint_A 1}
	\arrow[from=3-1, to=3-3]
	\arrow[from=1-3, to=3-3]
	\arrow["f"', from=1-1, to=3-1]
	\arrow[from=1-1, to=1-3]
	\arrow["\lrcorner"{anchor=center, pos=0.125, rotate=180}, draw=none, from=3-3, to=1-1]
\end{tikzcd}

> [Link to Diagram](https://q.uiver.app/?q=WzAsNCxbMCwwLCJBIl0sWzIsMCwiMSJdLFswLDIsIkIiXSxbMiwyLCJcXGNva2VyIGYgXFxkYSBCIFxcZGlzam9pbnRfQSAxIl0sWzIsM10sWzEsM10sWzAsMiwiZiIsMl0sWzAsMV0sWzMsMCwiIiwwLHsic3R5bGUiOnsibmFtZSI6ImNvcm5lciJ9fV1d)


We can identify this as 
\[
\coker( \Omega^0(\Sigma; L) \mapsvia{D_u = \delbar_J} \Omega^{0, 1} (\Sigma; L)) \da H^{0, 1}_{\delbar_J}(\Sigma; L)
.\]
The last equality is not so obvious, but follows if you think about how this splits out in the Hodge diamond:


\begin{tikzcd}
	&& {\Omega^2} && \textcolor{rgb,255:red,176;green,182;blue,7}{0} \\
	& {\Omega^{1, 0}} & {} & {\Omega^{0, 1}} &&&&&&&&&&&&& \oplus \\
	\textcolor{rgb,255:red,176;green,182;blue,7}{0} && {\Omega^0} \\
	\\
	&& {H_\delbar^{2}} \\
	& {H_\delbar^{1, 0}} & \oplus & {H_\delbar^{0, 1}} \\
	&& {H_\delbar^{0}} \\
	\\
	&& {{\Omega^{2}  \over \im \delbar_{1, 0} } \da \coker \delbar_{1, 0}} \\
	& {\ker \delbar_{1, 0}} & \oplus & {{\Omega^{0, 1}  \over \im \delbar_{0, 0} } \da \coker \delbar_{0, 0}} \\
	&& {\ker \delbar_{0, 0}}
	\arrow["{\delbar_{1, 0}}", from=2-2, to=1-3]
	\arrow["{\del_{0, 1}}"', from=2-4, to=1-3]
	\arrow["{\delbar_{0, 0}}"', color={rgb,255:red,214;green,92;blue,92}, from=3-3, to=2-4]
	\arrow["{\del_{0, 0}}", from=3-3, to=2-2]
	\arrow[draw={rgb,255:red,176;green,182;blue,7}, dashed, from=3-1, to=2-2]
	\arrow[draw={rgb,255:red,176;green,182;blue,7}, dashed, from=2-4, to=1-5]
	\arrow[no head, from=6-2, to=5-3]
	\arrow[no head, from=6-4, to=5-3]
	\arrow[no head, from=7-3, to=6-4]
	\arrow[no head, from=7-3, to=6-2]
	\arrow[no head, from=11-3, to=10-4]
	\arrow[no head, from=10-4, to=9-3]
	\arrow[no head, from=11-3, to=10-2]
	\arrow[no head, from=10-2, to=9-3]
	\arrow[from=6-2, to=7-3]
	\arrow["{\text{Identify}}", shorten <=15pt, shorten >=15pt, Rightarrow, from=6-4, to=10-4]
	\arrow["{\text{Take homology wrt }\delbar }", shorten <=15pt, shorten >=15pt, Rightarrow, from=2-4, to=6-4]
\end{tikzcd}

> [Link to Diagram](https://q.uiver.app/?q=WzAsMTgsWzIsMV0sWzEsMSwiXFxPbWVnYV57MSwgMH0iXSxbMywxLCJcXE9tZWdhXnswLCAxfSJdLFsyLDIsIlxcT21lZ2FeMCJdLFsyLDAsIlxcT21lZ2FeMiJdLFswLDIsIjAiLFs2Miw5MywzNywxXV0sWzQsMCwiMCIsWzYyLDkzLDM3LDFdXSxbMiw2LCJIX1xcZGVsYmFyXnswfSJdLFsxLDUsIkhfXFxkZWxiYXJeezEsIDB9Il0sWzMsNSwiSF9cXGRlbGJhcl57MCwgMX0iXSxbMiw0LCJIX1xcZGVsYmFyXnsyfSJdLFsyLDUsIlxcb3BsdXMiXSxbMSw5LCJcXGtlciBcXGRlbGJhcl97MSwgMH0iXSxbMiwxMCwiXFxrZXIgXFxkZWxiYXJfezAsIDB9Il0sWzE2LDEsIlxcb3BsdXMiXSxbMyw5LCJ7XFxPbWVnYV57MCwgMX0gIFxcb3ZlciBcXGltIFxcZGVsYmFyX3swLCAwfSB9IFxcZGEgXFxjb2tlciBcXGRlbGJhcl97MCwgMH0iXSxbMiw4LCJ7XFxPbWVnYV57Mn0gIFxcb3ZlciBcXGltIFxcZGVsYmFyX3sxLCAwfSB9IFxcZGEgXFxjb2tlciBcXGRlbGJhcl97MSwgMH0iXSxbMiw5LCJcXG9wbHVzIl0sWzEsNCwiXFxkZWxiYXJfezEsIDB9Il0sWzIsNCwiXFxkZWxfezAsIDF9IiwyXSxbMywyLCJcXGRlbGJhcl97MCwgMH0iLDIseyJjb2xvdXIiOlswLDYwLDYwXX0sWzAsNjAsNjAsMV1dLFszLDEsIlxcZGVsX3swLCAwfSJdLFs1LDEsIiIsMCx7ImNvbG91ciI6WzYyLDkzLDM3XSwic3R5bGUiOnsiYm9keSI6eyJuYW1lIjoiZGFzaGVkIn19fV0sWzIsNiwiIiwwLHsiY29sb3VyIjpbNjIsOTMsMzddLCJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJkYXNoZWQifX19XSxbOCwxMCwiIiwyLHsic3R5bGUiOnsiaGVhZCI6eyJuYW1lIjoibm9uZSJ9fX1dLFs5LDEwLCIiLDAseyJzdHlsZSI6eyJoZWFkIjp7Im5hbWUiOiJub25lIn19fV0sWzcsOSwiIiwwLHsic3R5bGUiOnsiaGVhZCI6eyJuYW1lIjoibm9uZSJ9fX1dLFs3LDgsIiIsMix7InN0eWxlIjp7ImhlYWQiOnsibmFtZSI6Im5vbmUifX19XSxbMTMsMTUsIiIsMix7InN0eWxlIjp7ImhlYWQiOnsibmFtZSI6Im5vbmUifX19XSxbMTUsMTYsIiIsMix7InN0eWxlIjp7ImhlYWQiOnsibmFtZSI6Im5vbmUifX19XSxbMTMsMTIsIiIsMCx7InN0eWxlIjp7ImhlYWQiOnsibmFtZSI6Im5vbmUifX19XSxbMTIsMTYsIiIsMCx7InN0eWxlIjp7ImhlYWQiOnsibmFtZSI6Im5vbmUifX19XSxbOCw3XSxbOSwxNSwiXFx0ZXh0e0lkZW50aWZ5fSIsMCx7InNob3J0ZW4iOnsic291cmNlIjoyMCwidGFyZ2V0IjoyMH0sImxldmVsIjoyfV0sWzIsOSwiXFx0ZXh0e1Rha2UgaG9tb2xvZ3kgd3J0IH1cXGRlbGJhciAiLDAseyJzaG9ydGVuIjp7InNvdXJjZSI6MjAsInRhcmdldCI6MjB9LCJsZXZlbCI6Mn1dXQ==)

The main thing to notice is that one is taking the homology with respect to $\delbar$, so the bottom-right corner of the diamond just forms a 2-term chain complex and we get a kernel/cokernel pair.

So now it suffices to show that $H^{0, 1}_\delbar(\Sigma; L) = 0$ (for $L\da L_k$ any of the bundle summands) whenever $c_1(L_k) \geq 1$ for all $L_k$.
We'll need a definition:

:::{.definition title="Canonical Bundle"}
Let $\Omega^1_\Sigma$ be the bundle of holomorphic 1-forms on $\Sigma$. 
Then the **canonical bundle** is defined as
\[
K_\Sigma \da \Extalg^{\dim \Sigma} \Omega^1_\Sigma = \Omega^2_{\Sigma}
,\]
which here coincides with the bundle of holomorphic 2-forms.
It is sometimes written as $\omega_\Sigma$
:::

We can now apply **Kodaira-Serre duality**:
\[
H^{0, 1}_{\delbar}(\Sigma; L) \mapsvia{\sim} H_{\delbar}^{1, 0}(\Sigma; L\dual \tensor K_\Sigma)\dual
,\]
where notably we've switched from antiholomorphic forms to holomorphic forms.

We'll also need **Kodaira vanishing**: If $\mcl\to \Sigma$ is a *positive* holomorphic line bundle, then 
\[
H^{i}(\Sigma; \mcl \tensor K_\Sigma) = 0 && \forall\, i>0
.\]

The book justifies the uses of this theorem here by saying $c_1(\mcl)$ can be interpreted as the self-intersection number of the zero section, and mumbles something about "positivity of intersections".
I'm not really sure why this works!

A related fact (maybe a consequence?) is that $\mcl$ has nonzero holomorphic sections $\iff c_1(\mcl) \geq 0$, so maybe positivity is related to positivity of Chern numbers.

Now setting $\mcl \da L\dual \tensor K_\Sigma$, playing around with the logic we find that if $c_1(\mcl) < 0$ then $\mcl$ has *no* holomorphic sections, and for reasons unknown, this should imply that $H^{1, 0}_{\delbar}(\Sigma; \mcl)\dual = 0$ and conclude the proof.
In any case, let's just compute the Chern number:

\[
c_1(\mcl)
&= c_1(L\dual) + c_1(K_\Sigma) \\
&= c_1(L\dual) - c_1(T \Sigma) \\
&= c_1(L\dual) - e_1(T S^1) && \text{since $c_1$ is a top class}\\
&= c_1(L\dual) + \qty{1 + (-1)^2} && \text{by a well-known formula for spheres} \\
&= c_1(L\dual) - 2 \\
&= - c_1(L) - 2
.\]
So now unwinding things, we have
\[
c_1(\mcl) < 0 
\iff -c_1(L) - 2 &< 0 \\
\iff -c_1(L) &< 2 \\
\iff c_1(L) &> - 2 \\
\iff c_1(L) &\geq -1
.\]
which is exactly the condition appearing in the lemma. 
Running this same argument for every $L_k$ concludes the proof!

:::

:::{.remark}
Note that we've used some special facts in that last calculation: 

- Using that $L\dual \cong L\inv$ for line bundles, $c_1(L\dual) = c_1(L\inv) = -c_1(L)$.
- I don't think $c_1(A\tensor B) = c_1(A) + c_1(B)$ in general, this must be special for $B = K$ the canonical.
- $c_1(K_X) = -c_1(TX)$ is a general fact, for complex manifolds at least.
  Apparently this is obvious from Chern-Weil theory, but you can also use
  \[
  c_1(TX) = c_1(\det TX) \da c_1\qty{ \Extalg^{\text{top}} TX} \da c_1(K_X\dual) = c_1(K_X\inv) =  -c_1(K_X)
  .\]
- The top Chern class is always the Euler class (almost by definition) when it makes sense.

:::




















